<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Linux,笔记,">





  <link rel="alternate" href="/atom.xml" title="寿司卷code" type="application/atom+xml">






<meta name="keywords" content="Linux,笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux笔记">
<meta property="og:url" content="https://imauu.gitee.io/2019/09/29/Linux笔记/index.html">
<meta property="og:site_name" content="寿司卷code">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/007S8ZIlgy1gixjr757h0j30sg0lc0tx.jpg">
<meta property="og:updated_time" content="2022-09-07T07:29:11.543Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux笔记">
<meta name="twitter:image" content="https://tva1.sinaimg.cn/large/007S8ZIlgy1gixjr757h0j30sg0lc0tx.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":14,"b2t":true,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://imauu.gitee.io/2019/09/29/Linux笔记/">






  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "1db79efd"
    });
  daovoice('update');
  </script>



  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "1db79efd"
    });
  daovoice('update');
  </script>



  <title>Linux笔记 | 寿司卷code</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <!--
    <a href="https://github.com/shang-code/" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></a>
    -->
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">寿司卷code</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不拼尽全力试一下，又怎么会知道啊。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://imauu.gitee.io/2019/09/29/Linux笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="尚先森">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://tva1.sinaimg.cn/large/e6c9d24ely1h4nm4ry4apj205i05ia9y.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寿司卷code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Linux笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-29T18:38:19+08:00">
                2019-09-29
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2022-09-07T15:29:11+08:00">
                2022-09-07
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/29/Linux笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/09/29/Linux笔记/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  14.8k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  60 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gixjr757h0j30sg0lc0tx.jpg" alt="linux_tubiao" style="zoom:67%;">

<a id="more"></a>

<h1 id="Linux概述"><a href="#Linux概述" class="headerlink" title="Linux概述"></a>Linux概述</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>摘自于<a href="https://baike.baidu.com/item/linux/27050" target="_blank" rel="noopener">百度百科</a></p>
<ol>
<li><p>Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和Unix的多用户、多任务、支持多线程和多CPU的操作系统。伴随着互联网的发展，Linux得到了来自全世界软件爱好者、组织、公司的支持。它除了在服务器操作系统方面保持着强劲的发展势头以外，在个人电脑、嵌入式系统上都有着长足的进步。使用者不仅可以直观地获取该操作系统的实现机制，而且可以根据自身的需要来修改完善这个操作系统，使其最大化地适应用户的需要.</p>
</li>
<li><p>Linux不仅系统性能稳定，而且是开源软件。其核心防火墙组件性能高效、配置简单，保证了系统的安全。在很多企业网络中，为了追求速度和安全，Linux操作系统不仅仅是被网络运维人员当作服务器使用，Linux既可以当作服务器，又可以当作网络防火墙是Linux的 一大亮点。</p>
</li>
<li><p>Linux与其他操作系统相比 ，具有开放源码、没有版权、技术社区用户多等特点 ，开放源码使得用户可以自由裁剪，灵活性高，功能强大，成本低。尤其系统中内嵌网络协议栈 ，经过适当的配置就可实现路由器的功能。这些特点使得Linux成为开发路由交换设备的理想开发平台。</p>
</li>
</ol>
<h2 id="提示符"><a href="#提示符" class="headerlink" title="提示符"></a>提示符</h2><p><code>[root@localhost ~]#</code></p>
<p><code>#</code> 表示当前权限为超级管理员root(最高的管理级别,说白了就是我想干啥就干啥)<br><code>$</code> 表示普通用户的权限<br><code>root</code> 表示当前用户为root<br><code>@</code> 表示在本地<br><code>localhost</code> 表示主机的名称<br><code>~</code> 表示当前的路径(注意:<code>~</code>是用户家目录的简写,root的家目录为<code>/root</code>,普通用户的家目录为<code>/home/用户名</code>)</p>
<h2 id="查询-帮助命令"><a href="#查询-帮助命令" class="headerlink" title="查询/帮助命令"></a>查询/帮助命令</h2><h3 id="查看系统内核版本"><a href="#查看系统内核版本" class="headerlink" title="查看系统内核版本"></a>查看系统内核版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure>

<h3 id="ls命令-查看指定-当前路径中有哪些文件或目录"><a href="#ls命令-查看指定-当前路径中有哪些文件或目录" class="headerlink" title="ls命令:查看指定/当前路径中有哪些文件或目录"></a><code>ls</code>命令:查看指定/当前路径中有哪些文件或目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接使用 ls, 表示显示当前路径下的内容,其余ls的复杂命令同理</span></span><br><span class="line">ls</span><br><span class="line">ll</span><br><span class="line">ll -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只显示指定目录下内容的名称</span></span><br><span class="line">ls /</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示指定目录下内容的详细信息,简写为 ll</span></span><br><span class="line">ls -l</span><br><span class="line">ll</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接查看当前目录的信息</span></span><br><span class="line">ll -d</span><br></pre></td></tr></table></figure>

<h3 id="ll-ls-l-每个字段的含义"><a href="#ll-ls-l-每个字段的含义" class="headerlink" title="ll(ls -l):每个字段的含义"></a>ll(ls -l):每个字段的含义</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看根目录下的所有文件/目录的详细内容</span></span><br><span class="line">ll /</span><br><span class="line"></span><br><span class="line">total 68</span><br><span class="line">lrwxrwxrwx.  1 root root     7 Aug  8  2018 bin -&gt; usr/bin</span><br><span class="line">dr-xr-xr-x.  5 root root  4096 Sep 17 11:01 boot</span><br><span class="line">drwxr-xr-x   2 root root  4096 Jan 21  2019 data</span><br><span class="line">drwxr-xr-x  19 root root  2980 Sep 17 12:38 dev</span><br><span class="line">drwxr-xr-x. 87 root root  4096 Sep 29 17:39 etc</span><br><span class="line">drwxr-xr-x.  8 root root  4096 Sep 29 17:09 home</span><br><span class="line">lrwxrwxrwx.  1 root root     7 Aug  8  2018 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx.  1 root root     9 Aug  8  2018 lib64 -&gt; usr/lib64</span><br><span class="line">drwx------.  2 root root 16384 Aug  8  2018 lost+found</span><br><span class="line">drwxr-xr-x.  2 root root  4096 Apr 11  2018 media</span><br><span class="line">drwxr-xr-x.  2 root root  4096 Apr 11  2018 mnt</span><br><span class="line">drwxr-xr-x.  4 root root  4096 Sep 17 11:04 opt</span><br><span class="line">dr-xr-xr-x  91 root root     0 Sep 17 12:38 proc</span><br><span class="line">dr-xr-x---. 13 root root  4096 Sep 29 17:28 root</span><br><span class="line">drwxr-xr-x  26 root root   940 Sep 20 16:11 run</span><br><span class="line">lrwxrwxrwx.  1 root root     8 Aug  8  2018 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x.  2 root root  4096 Apr 11  2018 srv</span><br><span class="line">dr-xr-xr-x  13 root root     0 Sep 17 16:44 sys</span><br><span class="line">drwxrwxrwt.  8 root root  4096 Sep 29 17:41 tmp</span><br><span class="line">drwxr-xr-x. 13 root root  4096 Aug  8  2018 usr</span><br><span class="line">drwxr-xr-x. 19 root root  4096 Jan 21  2019 var</span><br></pre></td></tr></table></figure>

<p>我们会发现每个文件或目录都具有相同的格式<br>解析:</p>
<p>以根目录下的etc为例说明<br>drwxr-xr-x. 87 root root  4096 Sep 29 17:39 etc</p>
<ol>
<li>开头第一个字母:</li>
</ol>
<ul>
<li><code>-</code> : 表示文件</li>
<li><code>d</code> : 表示目录</li>
<li><code>f</code> : 表示块设备文件</li>
<li><code>c</code> : 表示字符设备文件</li>
<li><code>l</code> : 表示链接文件</li>
<li><code>p</code> : 管道文件</li>
<li><code>s</code> : 套接字文件</li>
</ul>
<ol start="2">
<li>rwxr-xr-x</li>
</ol>
<p>分为三个用户类型<br>前三个字母属于文件所有者的权限(u)<br>中间三个字母属于组内用户的权限(g)<br>最后三个字母属于组外用户的权限(o)</p>
<p>文件下:</p>
<ul>
<li><code>-</code> : 没有对应的权限</li>
<li><code>r</code> : 可读</li>
<li><code>w</code> : 可写</li>
<li><code>x</code> : 可执行</li>
</ul>
<p>目录下:</p>
<ul>
<li><code>-</code> : 没有对应的权限</li>
<li><code>r</code> : 可查询此目录下文件名数据，比如ls命令</li>
<li><code>w</code> : 可以建立新目录/删除已存在目录/修改已存在的目录</li>
<li><code>x</code> : 具有执行的权限，简单地说，就是可以将该目录转换成家目录的能力，比如cd 命令。注意，x权限对于目录是极其重要的，如果没有该目录，表示你不能切换到该目录，更不能对其子目录或者文件进行操作，即使你有“r/w”权限。</li>
</ul>
<ol start="3">
<li><p>87<br> 表示硬链接个数</p>
</li>
<li><p>root root<br> 第一个root表示文件所有者<br> 第二个root表示组名</p>
</li>
<li><p>4096<br> 表示文件的大小,单位为字节</p>
</li>
<li><p>Sep 29 17:39<br> 表示文件最后修改日期</p>
</li>
<li><p>etc<br> 表示文件名</p>
</li>
</ol>
<h2 id="新建文件-目录"><a href="#新建文件-目录" class="headerlink" title="新建文件/目录"></a>新建文件/目录</h2><ul>
<li>mkdir : 新建目录</li>
<li>touch : 新建文件</li>
</ul>
<h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在根目录下新建一个名为aaa的目录</span></span><br><span class="line">mkdir /aaa</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">ll /</span><br></pre></td></tr></table></figure>

<p>进阶:</p>
<p>不加参数选项的mkdir只能建一层目录<br>如果想要建立多层目录的话?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在根目录下新建目录 /bbb1/bbb2/bbb3</span></span><br><span class="line">mkdir /bbb1/bbb2/bbb3 <span class="comment"># 发现行不通</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加上 -p 选项</span></span><br><span class="line">mkdir -p /bbb1/bbb2/bbb3 <span class="comment"># 成功</span></span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line">ll /bbb1/bbb2</span><br></pre></td></tr></table></figure>

<h3 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在根目录下新建一个名为qqq.txt的文件</span></span><br><span class="line">touch /qqq.txt</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">ll /</span><br></pre></td></tr></table></figure>

<p>进阶:</p>
<p>如果想要同时创建多个文件的话?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在根目录下同时创建名为q.txt w.txt e.txt 的三个文件</span></span><br><span class="line">touch /&#123;q,w,e&#125;.txt</span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line">ll /</span><br></pre></td></tr></table></figure>

<h2 id="删除文件-目录"><a href="#删除文件-目录" class="headerlink" title="删除文件/目录"></a>删除文件/目录</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除根目录下的 q.txt</span></span><br><span class="line">rm /q.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 暴力删除(不会出现操作提醒,直接删除)</span></span><br><span class="line">rm -rf /w.txt</span><br></pre></td></tr></table></figure>

<h2 id="chmod-更改文件-目录权限"><a href="#chmod-更改文件-目录权限" class="headerlink" title="chmod 更改文件/目录权限"></a>chmod 更改文件/目录权限</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先在/opt/下创建一个111.txt文件</span></span><br><span class="line">touch /opt/111.txt</span><br><span class="line"><span class="comment"># 改为满权限</span></span><br><span class="line">chmod 777 /opt/111.txt</span><br><span class="line"><span class="comment"># 递归赋予权限(使"此时"该目录下所有的文件或目录的权限都变为777)</span></span><br><span class="line">mkdir /syz</span><br><span class="line">chmod -R 777 /syz</span><br><span class="line">ll /</span><br><span class="line"><span class="comment"># 在该目录下新建一个syz.txt文件</span></span><br><span class="line">touch /syz/syz.txt</span><br><span class="line">ll</span><br><span class="line">    -rw-r--r--. 1 root root 0 10月  8 18:54 syz.txt</span><br><span class="line"><span class="comment"># 那么现在有一个问题:</span></span><br><span class="line"><span class="comment"># 现在这个syz.txt,普通用户可以删除吗?</span></span><br><span class="line"><span class="comment"># 你可能会说不可以,因为这个文件的普通用户权限为只读,没有可写可执行权限</span></span><br><span class="line"><span class="comment"># 但是,其实是可以的</span></span><br><span class="line"><span class="comment"># 因为,这个文件是在 777 权限的目录下</span></span><br><span class="line"><span class="comment"># 所以,不懂得童鞋,去百度一下,目录的rwx 与 文件的rwx有什么不同</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 算了,说一下吧</span></span><br><span class="line"><span class="comment"># 文件下:</span></span><br><span class="line">    r: 可读(cat)     </span><br><span class="line">    w: 可修改(vim)       </span><br><span class="line">    x: 可以运行</span><br><span class="line"><span class="comment"># 目录下:   </span></span><br><span class="line">    r: 可查看目录内容(ls)   </span><br><span class="line">    w: 可以增加/删除/修改目录里的内容(mkdir/rmdir/rm)   </span><br><span class="line">    x: 可以切换进该目录中(<span class="built_in">cd</span>)</span><br></pre></td></tr></table></figure>

<p>解析:<br>777指的是按照rwxrwxrwx的(二进制)顺序排列的权限</p>
<p>r表示4<br>w表示2<br>x表示1</p>
<p><strong>注</strong>:不清楚<code>二进制</code>的同学去百度或者问问其他的人</p>
<p>比如 rwxr-xr-x 在chmod中可以表示为755</p>
<p>明白了吧?<br>很简单的<br>ok</p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch /opt/222.txt</span><br><span class="line">chmod u-x,g+w /opt/222.txt</span><br><span class="line">chmod o=r-x /opt/222.txt</span><br></pre></td></tr></table></figure>

<p>或许有的同学不知道这个<code>u</code>是什么意思,其实细心的同学会发现,其实我在上面已经指出了它的含义了</p>
<p>来看:</p>
<p>rwxrwxrwx</p>
<p>分为三组,这个都知道吧?</p>
<p>前面三个字符属于u(所有者)<br>中间三个字符属于g(组内)<br>后面三个字符属于o(组外)</p>
<p>如果还是不明白什么意思,不要着急,后面会具体的讲这些问题.</p>
<p><code>u-x</code>的意思就是,<code>所有者</code>的权限中去掉<code>x</code>权限<br><code>g+x</code>的意思就是,<code>组内</code>的权限中加上<code>w</code>权限</p>
<p>其余的以此类推,这里不做演示了</p>
<h2 id="四个帮助命令"><a href="#四个帮助命令" class="headerlink" title="四个帮助命令"></a>四个帮助命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#此处以ls查看命令为例</span></span><br><span class="line"></span><br><span class="line">whatis ls</span><br><span class="line"></span><br><span class="line">ls --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">man ls</span><br><span class="line"></span><br><span class="line">info ls</span><br></pre></td></tr></table></figure>

<h2 id="终端使用技巧"><a href="#终端使用技巧" class="headerlink" title="终端使用技巧"></a>终端使用技巧</h2><ol>
<li>查询历史命令</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># history -c : 清空当前历史命令</span></span><br><span class="line"><span class="comment"># history -w : 将历史命令保存到历史命令文件 /root/.bash_histroy 中</span></span><br><span class="line"><span class="built_in">history</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>清空终端屏幕</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 快捷键 ctrl + l</span></span><br><span class="line">clear</span><br></pre></td></tr></table></figure>

<p>安利一波😝:</p>
<p>上下键调用历史命令<br>Tab建自动补齐 –&gt; 补齐:命令/文件名/目录名<br>!$ –&gt; 调用上一条命令中的最后一个参数<br>!keyword –&gt; 调用历史命令中含有当前关键字的,距离当前时间最近的那一条命令<br>date –&gt; 显示系统时间<br>pwd –&gt; 打印当前目录</p>
<h2 id="了解路径"><a href="#了解路径" class="headerlink" title="了解路径"></a>了解路径</h2><p>在Linux中,路径分为<code>相对路径</code>和<code>绝对路径</code></p>
<p><code>/</code> : 表示根目录<br><code>..</code> : 上一级目录</p>
<p><code>cd</code>命令为切换路径</p>
<p>我们先来看一下根目录下有哪些目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ls为查看当前或者指定路径下有哪些文件/目录</span></span><br><span class="line">ls /</span><br><span class="line"></span><br><span class="line">bin   data  etc   lib    lost+found  mnt  proc  run   srv  tmp  var</span><br><span class="line">boot  dev   home  lib64  media       opt  root  sbin  sys  usr  website</span><br></pre></td></tr></table></figure>

<p>由上面我们可以看到,根目录<code>/</code>下还有好多的子目录<br>接下来我们使用<code>cd</code>命令来切换到根目录中的其中一个目录中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /lib</span><br></pre></td></tr></table></figure>

<p>切换目录之后,我们会发现提示符中的路径也发生了变化(由<code>~</code>变为了<code>lib</code>)</p>
<p>这种切换方式为<code>绝对路径</code>,因为是从<code>/</code>目录下开始的</p>
<p>我们当前路径在根目录<code>/lib</code>下</p>
<p>我们使用<code>ls</code>命令来查看<code>lib</code>目录下又有哪些子目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line"></span><br><span class="line">binfmt.d  dracut     gcc    kernel      modules-load.d  python3.6         sse2        tuned</span><br><span class="line">cpp       firewalld  grub   locale      NetworkManager  rpm               sysctl.d    udev</span><br><span class="line">crda      firmware   kbd    modprobe.d  polkit-1        sendmail          systemd     yum-plugins</span><br><span class="line">debug     games      kdump  modules     python2.7       sendmail.postfix  tmpfiles.d</span><br></pre></td></tr></table></figure>

<p>🐦🐦🐦🐦…<br>我举个例子来说明一下绝对路径吧</p>
<p>假设我们的当前用户是root,家目录在<code>/root</code>,我们需要查看根目录下的很多目录</p>
<p>如果按照上面的办法,先使用<code>cd</code>命令切换目录,然后再用<code>ls</code>查看的话太过于麻烦,怎么办呢?</p>
<p>这时候绝对路径就派上用场了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在当前目录 /root 下查看 /lib/python3.6 目录中的内容</span></span><br><span class="line">ls /lib/python3.6</span><br></pre></td></tr></table></figure>

<p>也就是说,<code>绝对路径</code>是以根目录为起点的一个<code>树状</code>完整目录</p>
<p>🐓🐓🐓🐓…<br>那什么是相对路径呢</p>
<p>假设我们现在已经使用<code>cd</code>命令切换到了根目录<code>/</code>下,我们想要查看根目录下<code>lib</code>目录下的<code>python3.6</code>,怎么办?<br>难道还是用<code>ls  /lib/python3.6</code>吗?</p>
<p>可以是可以,但是显然再使用<code>绝对路径</code>就有点<strong>繁琐</strong>了</p>
<p>我们可以使用<code>相对路径</code><br>因为我们当前已经在根目录下了,所以不必再加上<code>/</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls lib/python3.6</span><br></pre></td></tr></table></figure>

<p>也就是说,<code>相对路径是以当前路径为基准进行命令操作</code></p>
<p>也许你可能会说,不就是差了一个<code>/</code>号吗?<br>我这里只是举了一个例子来<code>演示</code>,实际情况下,能用相对路径就用相对路径,其余就使用绝对路径</p>
<p>举个例子吧</p>
<p>比如我们现在所在的路径是<code>/lib/python3.6</code>,我们想要查看<code>/etc/rpm/</code>目录下的内容,这时候使用相对路径就有点不切实际了,应该使用绝对路径来查看</p>
<p>懂了吧?</p>
<p>ok👌</p>
<h2 id="Linux下的常见目录含义"><a href="#Linux下的常见目录含义" class="headerlink" title="Linux下的常见目录含义"></a>Linux下的常见目录含义</h2><ul>
<li>boot : 相关的启动文件(引导程序,kernel等)</li>
<li>etc : 配置文件</li>
<li>tmp : 进程产生的临时文件存放位置</li>
<li>var : 存放经常变化的数据(数据库,日志,邮件,定时)</li>
<li>media : 设备挂载目录 </li>
<li>mnt : 进程挂载</li>
<li>bin : 普通用户使用的命令 –&gt; /usr/bin</li>
<li>sbin : 管理员使用的命令 –&gt; /ust/sbin</li>
<li>dev : 设备文件</li>
<li>proc : 虚拟的文件系统/进程实时状态信息</li>
<li>usr : 系统文件</li>
</ul>
<h1 id="文件操作命令"><a href="#文件操作命令" class="headerlink" title="文件操作命令"></a>文件操作命令</h1><h2 id="vim编辑器的用法"><a href="#vim编辑器的用法" class="headerlink" title="vim编辑器的用法"></a>vim编辑器的用法</h2><p>具体用法见我的这篇博客<a href="https://shang-code.cn/2019/08/24/vim的使用方法-相关配置/" target="_blank" rel="noopener">vim的使用方法</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前目录下如果文件存在,会直接进入该文件中</span></span><br><span class="line">vim test.txt</span><br><span class="line"><span class="comment"># 当前目录下不存在,会在当前目录下新建一个名为test.txt的文件</span></span><br></pre></td></tr></table></figure>

<p>进入后想要退出的话:<br>:wq –&gt; 保存并且退出<br>:!q –&gt; 不保存强制退出</p>
<h2 id="用户的家目录与虚拟控制台"><a href="#用户的家目录与虚拟控制台" class="headerlink" title="用户的家目录与虚拟控制台"></a>用户的家目录与虚拟控制台</h2><h3 id="用户的家目录问题"><a href="#用户的家目录问题" class="headerlink" title="用户的家目录问题"></a>用户的家目录问题</h3><p>超级用户root的家目录 : /root<br>普通用户的家目录 : /home/zhangsan001</p>
<p>如何新建普通用户:</p>
<p>useradd zhangsan001<br>passwd zhangsan001</p>
<p>su - zhangsan001(切换身份的同时也切换家目录)<br>su zhangsan001(只切换身份)</p>
<h3 id="虚拟控制台的使用技巧"><a href="#虚拟控制台的使用技巧" class="headerlink" title="虚拟控制台的使用技巧"></a>虚拟控制台的使用技巧</h3><p>切换方式:ctrl+alt+F2-F6<br>返回方式:alt+F1<br>测试方式:who和who am i</p>
<h2 id="重定向技术"><a href="#重定向技术" class="headerlink" title="重定向技术"></a>重定向技术</h2><h3 id="查看文件内容的命令"><a href="#查看文件内容的命令" class="headerlink" title="查看文件内容的命令"></a>查看文件内容的命令</h3><p>more: 不一次性的输出所有内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用more命令查看passwd</span></span><br><span class="line"><span class="comment"># 按下空格不断进行输出</span></span><br><span class="line">more /etc/passwd</span><br></pre></td></tr></table></figure>

<p>cat: 一次性输出所有内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用cat命令查看passwd</span></span><br><span class="line">cat /etc/passwd</span><br></pre></td></tr></table></figure>

<h3 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h3><p>符号: <code>&gt;</code><br>形式: 覆盖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ls &gt; abc.txt</span><br><span class="line">cat abc.txt <span class="comment">#查看</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">pwd</span> &gt; abc.txt <span class="comment">#覆盖abc.txt之前的文本内容</span></span><br><span class="line">cat abc.txt <span class="comment">#查看</span></span><br></pre></td></tr></table></figure>

<h3 id="追加重定向"><a href="#追加重定向" class="headerlink" title="追加重定向"></a>追加重定向</h3><p>符号: <code>&gt;&gt;</code><br>形式: 追加</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ll &gt;&gt; abc.txt</span><br><span class="line"><span class="built_in">pwd</span> &gt;&gt; abc.txt</span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line">cat abc.txt</span><br></pre></td></tr></table></figure>

<h3 id="错误重定向"><a href="#错误重定向" class="headerlink" title="错误重定向"></a>错误重定向</h3><p>符号: <code>2&gt;</code><br>形式: 覆盖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">geafasdsa 2&gt; abc.txt</span><br><span class="line">cat abc.txt</span><br><span class="line"></span><br><span class="line">etgasr 2&gt; abc.txt</span><br><span class="line">cat abc.txt</span><br></pre></td></tr></table></figure>

<h3 id="全部重定向"><a href="#全部重定向" class="headerlink" title="全部重定向"></a>全部重定向</h3><p>符号: <code>&amp;&gt;</code><br>形式: 覆盖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正确命令</span></span><br><span class="line"><span class="built_in">pwd</span> &amp;&gt; aaa.txt</span><br><span class="line">cat aaa.txt</span><br><span class="line"><span class="comment"># 错误命令</span></span><br><span class="line">afssafa &amp;&gt; aaa.txt</span><br><span class="line">cat aaa.txt</span><br></pre></td></tr></table></figure>

<h2 id="find命令"><a href="#find命令" class="headerlink" title="find命令"></a>find命令</h2><p>顾名思义,find是查找的意思</p>
<p>参数:</p>
<ul>
<li>-type : 查找类型(f为文件类型,d为目录类型)</li>
<li>-user : 查找内容的所有者</li>
<li>-name : 查找内容的名称</li>
<li>-iname : 查找内容不区分大小写</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 试着把find与重定向组合使用</span></span><br><span class="line"><span class="comment"># 查找根目录下,类型为文件,文件所有者为zhangsan001的文件,重定向到abc2.txt中</span></span><br><span class="line">find /  -<span class="built_in">type</span> f -user zhangsan001 &gt; abc2.txt</span><br><span class="line"></span><br><span class="line">find /  -<span class="built_in">type</span> f -user zhangsan001 2&gt; abc3.txt</span><br><span class="line"></span><br><span class="line">find /  -<span class="built_in">type</span> f -user zhangsan001 &amp;&gt; abc4.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#按文件名查找名字中含有abc的文件或目录</span></span><br><span class="line">find / -name <span class="string">"*abc*"</span></span><br><span class="line"><span class="comment">#按类型查找名字中含有abc的目录</span></span><br><span class="line">find / -name <span class="string">"*abc*"</span> -<span class="built_in">type</span> d</span><br><span class="line"></span><br><span class="line"><span class="comment">#按用户查找</span></span><br><span class="line">find / -name <span class="string">"*abc*"</span> -<span class="built_in">type</span> f -user zhangsan001</span><br></pre></td></tr></table></figure>

<p><strong>高级技巧:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以张三身份建立三个文件abc1.txt,abc2.txt,abc3.txt</span></span><br><span class="line"><span class="comment"># 测试查找这三个文件</span></span><br><span class="line">find / -name <span class="string">"*abc*"</span> -<span class="built_in">type</span> f -user zhangsan001</span><br><span class="line"><span class="comment"># 高级技巧:查找并删除</span></span><br><span class="line">find / -name <span class="string">"*abc*"</span> -<span class="built_in">type</span> f -user zhangsan001 -<span class="built_in">exec</span> rm -rf &#123;&#125; \;</span><br></pre></td></tr></table></figure>

<h2 id="mv移动命令的四种用法"><a href="#mv移动命令的四种用法" class="headerlink" title="mv移动命令的四种用法"></a>mv移动命令的四种用法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建一个111.txt</span></span><br><span class="line">touch 111.txt</span><br><span class="line"><span class="comment"># 把111.txt移动到/home/zhangsan001/目录下,并重命名为222.txt</span></span><br><span class="line">mv 111.txt /home/zhangsan001/222.txt</span><br><span class="line"><span class="comment"># 新建一个222.txt文件,把222.txt移动到/root/目录下</span></span><br><span class="line">mv 222.txt /root/</span><br><span class="line"><span class="comment"># /home/zhangsan001/目录下已经存在222.txt,尝试强力覆盖</span></span><br><span class="line">mv -f /root/222.txt /home/zhangsan001/</span><br><span class="line"><span class="comment"># 移动目录</span></span><br><span class="line">mv  /root/qqq /home/zhangsan001/</span><br></pre></td></tr></table></figure>

<h2 id="cp复制命令的四种用法"><a href="#cp复制命令的四种用法" class="headerlink" title="cp复制命令的四种用法"></a>cp复制命令的四种用法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 复制当前目录下的 222.txt 文件到根目录下,并重命名为 333.txt</span></span><br><span class="line">cp 222.txt /333.txt</span><br><span class="line"><span class="comment"># 复制当前目录下的 333.txt 到 /home/zhangsan001/ 目录下</span></span><br><span class="line">cp 333.txt /home/zhangsan001/</span><br><span class="line"><span class="comment"># 如果目标位置出现同名文件，则不覆盖；如果想覆盖，可以使用 \cp  333.txt /</span></span><br><span class="line">cp -n 333.txt /</span><br><span class="line"><span class="comment"># 复制目录,需要加上 -r 参数</span></span><br><span class="line">cp -r qqq /</span><br><span class="line"><span class="comment"># 繁琐目录下的文件备份方法</span></span><br><span class="line">cp /etc/sysconfig/network-scripts/&#123;ifcfg-enp2s0,ifcfg-enp2s0.bak&#125;</span><br></pre></td></tr></table></figure>

<h2 id="grep在文件内容中查找"><a href="#grep在文件内容中查找" class="headerlink" title="grep在文件内容中查找"></a>grep在文件内容中查找</h2><p>格式：grep key filename</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建一个qqq.txt并写入内容</span></span><br><span class="line">touch qqq.txt</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"hello\nworld\nsafasfss\nasfsadasd\nword\nasfasfswordasfasf\nsafsafadfa\nfsaferfasasfword\n32114asfasr\n12434word"</span> &gt; qqq.txt</span><br><span class="line"><span class="comment"># 使用grep进行行的筛选</span></span><br><span class="line">grep word qqq.txt</span><br><span class="line"><span class="comment"># 把上面命令的结果重定向到qqq1.txt中</span></span><br><span class="line">grep word qqq.txt &gt; qqq1.txt</span><br><span class="line">cat qqq1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建一个aaa.txt,并写入内容</span></span><br><span class="line">touch aaa.txt</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"asafasd\nnetworkgefsafas\nafasfasfsarsfanetwork\aadfff\n12413315535networkasfarfwas\nasfasfasfnetwork"</span></span><br><span class="line"><span class="comment"># 筛选以network开头的行</span></span><br><span class="line">grep <span class="string">"^network"</span> aaa.txt</span><br><span class="line"><span class="comment"># 筛选以network结尾的行</span></span><br><span class="line">grep <span class="string">"network$"</span> aaa.txt</span><br></pre></td></tr></table></figure>

<h1 id="用户与组管理"><a href="#用户与组管理" class="headerlink" title="用户与组管理"></a>用户与组管理</h1><h2 id="用户管理之useradd命令"><a href="#用户管理之useradd命令" class="headerlink" title="用户管理之useradd命令"></a>用户管理之useradd命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加一个名为a001的新用户</span></span><br><span class="line">useradd a001</span><br><span class="line"><span class="comment"># 设置密码</span></span><br><span class="line">passwd a001</span><br></pre></td></tr></table></figure>

<h2 id="Linux系统底层的四个连锁反映"><a href="#Linux系统底层的四个连锁反映" class="headerlink" title="Linux系统底层的四个连锁反映"></a>Linux系统底层的四个连锁反映</h2><p>当添加好新用户时<br>系统<code>自动创建</code>该用户的家目录/home/a001<br>vim /etc/passwd（多了一行该用户的记录）<br>vim /etc/shadow（影子文件中多一行密码记录）<br>vim /etc/group（组信息文件中多一行记录，即自动创建同名组）</p>
<h3 id="etc-passwd-七个字段的含义"><a href="#etc-passwd-七个字段的含义" class="headerlink" title="/etc/passwd 七个字段的含义"></a>/etc/passwd 七个字段的含义</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a001:x:504:505::/home/a001:/bin/bash</span><br><span class="line"><span class="comment"># 用户名:密码:用户ID:组ID:用户描述:家目录:shell</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如何把普通用户改为超级管理员 -&gt; 把该用户的用户ID改为0</span></span><br></pre></td></tr></table></figure>

<h3 id="etc-group-四个字段的含义"><a href="#etc-group-四个字段的含义" class="headerlink" title="/etc/group 四个字段的含义"></a>/etc/group 四个字段的含义</h3><p>a001:x:505:<br>test:x:502:harry,sam<br>组名:组密码:组ID:该组中包含的其他用户名</p>
<h3 id="etc-shadow-九个字段的含义"><a href="#etc-shadow-九个字段的含义" class="headerlink" title="/etc/shadow 九个字段的含义"></a>/etc/shadow 九个字段的含义</h3><p>权限 000</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">a001:<span class="variable">$6</span><span class="variable">$9</span>./UcZIY<span class="variable">$GWuGRx6h7O4MEd3GHMyUylHCZRVkbwPoqg</span>.98A/ogjXoNlylqzhjncXjO..vK7OTLaNLPKL8a8NII0C1i4ZIK0:16000:0:99999:7:::</span><br><span class="line"><span class="comment"># 用户名:加密后的密码:密码最后一次修改日期:两次密码的修改时间间隔:密码有效期:密码到期的警告时间:密码过期后的宽限天数:账号失效时间:保留字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解析:</span></span><br><span class="line"><span class="comment"># 1. 用户名</span></span><br><span class="line"><span class="comment"># 2. 加密后的密码 -&gt; 密码只是单独的 *或!! ,说明没有密码,无法登陆,也就是禁用了该用户</span></span><br><span class="line"><span class="comment"># 3. 密码最后一次修改日期 -&gt; 以1970年1月1日作为标准时间,每过一天时间戳 +1</span></span><br><span class="line"><span class="comment"># 4. 两次密码的修改时间间隔 -&gt; 和第三个字段相比,比如这里设置为10,那么这十天之内不可以该用户不可以修改密码</span></span><br><span class="line"><span class="comment"># 5. 密码有效期 -&gt; 可以自行修改,一般是99999,意思是99999天内有效,不用管,除非你能活这么长时间</span></span><br><span class="line"><span class="comment"># 6. 密码到期的警告时间 -&gt; 比如这里为7,在密码有效期还剩7天时,会自动警告</span></span><br><span class="line"><span class="comment"># 7. 密码过期后的宽限天数 -&gt; 密码有效期内没有修改密码,可以再宽限你几天,具体几天看数值(可自定义),0 代表密码过期后立即失效, 1 代表密码永远不会失效</span></span><br><span class="line"><span class="comment"># 8. 账号失效时间 -&gt; 需要用时间戳表示,就算密码有效期还没有到,只要我们设置了比有效期还要短的天数,那么密码也会立即失效</span></span><br><span class="line"><span class="comment"># 9. 保留字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间戳换算成年月日的方法</span></span><br><span class="line">date -d <span class="string">"1970-01-01 19999 days"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 年月日换算成时间戳的方法</span></span><br><span class="line"><span class="comment"># 注意 +%s 要连在一起写</span></span><br><span class="line"><span class="built_in">echo</span> $(($(date --date=<span class="string">"2019-10-10"</span> +%s)/86400+1))</span><br></pre></td></tr></table></figure>

<h3 id="用户的邮箱"><a href="#用户的邮箱" class="headerlink" title="用户的邮箱"></a>用户的邮箱</h3><p>路径:/var/spool/mail/用户名/</p>
<p>在添加新用户时自动创建</p>
<h3 id="用户模板目录"><a href="#用户模板目录" class="headerlink" title="用户模板目录"></a>用户模板目录</h3><p>路径:/etc/skel</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们新建用户后,在其家目录中其实会有一些隐藏文件</span></span><br><span class="line"><span class="built_in">cd</span> /home/syz</span><br><span class="line">ll -a</span><br><span class="line">    总用量 16</span><br><span class="line">    drwx------. 3 syz  syz   99 10月  9 02:14 .</span><br><span class="line">    drwxr-xr-x. 7 root root  70 10月  9 01:58 ..</span><br><span class="line">    -rw-------. 1 syz  syz   69 10月  9 02:14 .bash_history</span><br><span class="line">    -rw-r--r--. 1 syz  syz   18 8月   3 2017 .bash_logout</span><br><span class="line">    -rw-r--r--. 1 syz  syz  193 8月   3 2017 .bash_profile</span><br><span class="line">    -rw-r--r--. 1 syz  syz  231 8月   3 2017 .bashrc</span><br><span class="line">    drwxr-xr-x. 4 syz  syz   39 10月  6 11:12 .mozilla</span><br><span class="line"></span><br><span class="line"><span class="comment"># 其实,这些隐藏文件都是从 /etc/skel文件下拷贝过来的</span></span><br><span class="line">ll -a /etc/skel</span><br><span class="line">ll -a /etc/skel</span><br><span class="line">    总用量 24</span><br><span class="line">    drwxr-xr-x.  3 root root   78 10月  6 11:13 .</span><br><span class="line">    drwxr-xr-x. 90 root root 8192 10月 10 18:32 ..</span><br><span class="line">    -rw-r--r--.  1 root root   18 8月   3 2017 .bash_logout</span><br><span class="line">    -rw-r--r--.  1 root root  193 8月   3 2017 .bash_profile</span><br><span class="line">    -rw-r--r--.  1 root root  231 8月   3 2017 .bashrc</span><br><span class="line">    drwxr-xr-x.  4 root root   39 10月  6 11:12 .mozilla</span><br></pre></td></tr></table></figure>

<h2 id="相关测试"><a href="#相关测试" class="headerlink" title="相关测试:"></a>相关测试:</h2><h3 id="shell测试"><a href="#shell测试" class="headerlink" title="shell测试"></a>shell测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建用户a002,并设置不能本地登录</span></span><br><span class="line"><span class="comment"># 参数 -s 表示设置shell</span></span><br><span class="line">useradd -s /sbin/nologin a002 </span><br><span class="line">passwd a002</span><br></pre></td></tr></table></figure>

<p>如何开启登录权限:直接修改<code>/etc/passwd</code>中的shell字段为/bin/login</p>
<p>注意：/sbin/nologin这种shell的典型应用场合是给<code>FTP客户端</code>用户来设置的。</p>
<h3 id="其他参数测试"><a href="#其他参数测试" class="headerlink" title="其他参数测试"></a>其他参数测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -c : 用户描述</span></span><br><span class="line"><span class="comment"># -d : 指定新账户的家目录</span></span><br><span class="line"><span class="comment"># -m : 创建用户的家目录</span></span><br><span class="line"><span class="comment"># -u : 指定用户的id</span></span><br><span class="line"><span class="comment"># -d -m 通常组合使用</span></span><br><span class="line"><span class="comment"># -g : 指定为第一所属组(第一所属组只能有一个)</span></span><br><span class="line"><span class="comment"># -G : 指定为其他附属组</span></span><br><span class="line">useradd -c <span class="string">"ordinary user"</span> -m -d /var/a003 -u 333 a003</span><br><span class="line">passwd a003</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">tail -1 /etc/passwd</span><br><span class="line"><span class="comment"># a003:x:333:507:ordinary user:/var/a003:/bin/bash</span></span><br></pre></td></tr></table></figure>

<h2 id="用户管理之userdel命令"><a href="#用户管理之userdel命令" class="headerlink" title="用户管理之userdel命令"></a>用户管理之userdel命令</h2><h3 id="不彻底的删除方法"><a href="#不彻底的删除方法" class="headerlink" title="不彻底的删除方法"></a>不彻底的删除方法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userdel a001</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">tail -3 /etc/passwd</span><br></pre></td></tr></table></figure>

<h3 id="彻底的删除方法"><a href="#彻底的删除方法" class="headerlink" title="彻底的删除方法"></a>彻底的删除方法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 同时删除对应的四个连锁反映</span></span><br><span class="line">userdel -rf a003</span><br></pre></td></tr></table></figure>

<h2 id="用户管理之usermod命令"><a href="#用户管理之usermod命令" class="headerlink" title="用户管理之usermod命令"></a>用户管理之usermod命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更改a002用户的id</span></span><br><span class="line">usermod -u 600 a002</span><br><span class="line"><span class="comment"># 设置用户a002为不可本地登录</span></span><br><span class="line">usermod -s /sbin/nologin a002</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">tail -3 /etc/passwd</span><br></pre></td></tr></table></figure>

<h2 id="组管理之groupadd命令"><a href="#组管理之groupadd命令" class="headerlink" title="组管理之groupadd命令"></a>组管理之groupadd命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建一个名为g001的组</span></span><br><span class="line">groupadd g001</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">tail -3 /etc/group</span><br></pre></td></tr></table></figure>

<h2 id="组管理之groupdel命令"><a href="#组管理之groupdel命令" class="headerlink" title="组管理之groupdel命令"></a>组管理之groupdel命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除组g001</span></span><br><span class="line">groupdel g001</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">tail -3 /etc/group</span><br><span class="line"><span class="comment"># 不能删除用户的第一所属组</span></span><br><span class="line">groupdel a002  // cannot remove the primary group of user <span class="string">'a002'</span></span><br></pre></td></tr></table></figure>

<h2 id="gpasswd-usermod-组和用户的关系"><a href="#gpasswd-usermod-组和用户的关系" class="headerlink" title="(gpasswd,usermod)组和用户的关系"></a>(gpasswd,usermod)组和用户的关系</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 知识点1️⃣:gpasswd</span></span><br><span class="line"><span class="comment"># 格式: gpasswd [选项] 用户名 组名</span></span><br><span class="line"><span class="comment"># 把用户b001加入到组group1中</span></span><br><span class="line"><span class="comment"># -a : 添加</span></span><br><span class="line"><span class="comment"># -d : 删除</span></span><br><span class="line">gpasswd -a b001 group1</span><br><span class="line"><span class="comment"># 同理</span></span><br><span class="line">gpasswd -a b002 group1</span><br><span class="line">gpasswd -a b003 group1</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">tail -3 /etc/group</span><br><span class="line">    group1:x:604:b001,b002,b003</span><br><span class="line">**********************************</span><br><span class="line"><span class="comment"># 把b003从组group1中移除</span></span><br><span class="line">gpasswd -d b003 group1</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">tail -3 /etc/group</span><br><span class="line">**********************************</span><br><span class="line"><span class="comment"># 查看用户b001加入了哪些组</span></span><br><span class="line">groups b001</span><br><span class="line">    b001 : b001 group1</span><br><span class="line"><span class="comment"># 我们会发现用户加入的新组归属于 其他附属组</span></span><br><span class="line">**********************************</span><br><span class="line"><span class="comment"># 修改第一所属组的测试</span></span><br><span class="line">gpasswd -a a002 group1</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">groups a002</span><br><span class="line">    a002 : a002 group1</span><br><span class="line"><span class="comment"># 把group2作为用户a002的第一所属组</span></span><br><span class="line"><span class="comment"># 知识点2️⃣:usermod</span></span><br><span class="line"><span class="comment"># 格式: usermod [选项] 组名 用户名</span></span><br><span class="line"><span class="comment"># usermod 的选项和useradd比较类似,基本上都是同一个意思</span></span><br><span class="line"><span class="comment"># - g : 第一所属组</span></span><br><span class="line"><span class="comment"># - G : 其他附属组</span></span><br><span class="line"><span class="comment"># - c : 用户描述信息</span></span><br><span class="line"><span class="comment"># - L : 临时锁定用户(锁定会会发现/etc/shadow文件中的一长串密码开头多了一个字符)</span></span><br><span class="line"><span class="comment"># - U : 解锁用户(把/etc/shadow文件中变化的密码复原)</span></span><br><span class="line">usermod -g group2 a002</span><br><span class="line">groups a002</span><br><span class="line">    a002 : group2 group1</span><br><span class="line">********************************** </span><br><span class="line"><span class="comment"># 修改附属组的测试</span></span><br><span class="line">groups b001</span><br><span class="line">    b001 : b001 group1 group2</span><br><span class="line"><span class="comment"># 把组a002作为用户b001的其他附属组</span></span><br><span class="line">usermod -G a002 b001</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">groups b001</span><br><span class="line">    b001 : b001 a002</span><br></pre></td></tr></table></figure>

<h2 id="chown命令的使用方法"><a href="#chown命令的使用方法" class="headerlink" title="chown命令的使用方法"></a>chown命令的使用方法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式: chown 文件所有者:所属组名称 文件名称 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把文件qqq1.txt的文件所有者和所属组改为 b001 和 group1 </span></span><br><span class="line">chown b001:group1 qqq1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把文件qqq1.txt的所属组改为root </span></span><br><span class="line">chown :root qqq1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把文件qqq1.txt的文件所有者改为b003</span></span><br><span class="line">chown b003: qqq1.txt(自动以该用户私有组替换)</span><br></pre></td></tr></table></figure>

<p><strong>注:</strong>一个用户创建的文件,如果想要另一个用户对该文件进行访问/修改/执行,可以把另一个用户加入到这个文件的所属组中,然后使用chmod命令修改该文件的组内权限即可</p>
<h1 id="runlevel运行级别"><a href="#runlevel运行级别" class="headerlink" title="runlevel运行级别"></a>runlevel运行级别</h1><h2 id="7种运行级别的含义"><a href="#7种运行级别的含义" class="headerlink" title="7种运行级别的含义:"></a>7种运行级别的含义:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/inittab</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    0 - halt    <span class="comment">#关机</span></span><br><span class="line">    1 - Single user mode    <span class="comment">#单用户模式</span></span><br><span class="line">    2 - Multiuser, without NFS (The same as 3, <span class="keyword">if</span> you <span class="keyword">do</span> not have networking)   <span class="comment">#多用户模式</span></span><br><span class="line">    3 - Full multiuser mode <span class="comment">#完整多用户模式</span></span><br><span class="line">    4 - unused  <span class="comment">#备用</span></span><br><span class="line">    5 - X11 <span class="comment">#支持图形界面</span></span><br><span class="line">    6 - reboot (Do NOT <span class="built_in">set</span> initdefault to this) <span class="comment">#重启</span></span><br></pre></td></tr></table></figure>

<h2 id="查看和改变运行级别的方法"><a href="#查看和改变运行级别的方法" class="headerlink" title="查看和改变运行级别的方法"></a>查看和改变运行级别的方法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看运行级别</span></span><br><span class="line">runlevel</span><br><span class="line"><span class="comment"># 改变运行级别</span></span><br><span class="line">init n</span><br><span class="line"><span class="comment"># 总结关闭系统的方法</span></span><br><span class="line">init 0</span><br><span class="line">shutdown -h now</span><br><span class="line"><span class="comment"># 总结重启系统的方法</span></span><br><span class="line">reboot</span><br><span class="line">init 6</span><br></pre></td></tr></table></figure>

<h1 id="破解超级用户root的密码"><a href="#破解超级用户root的密码" class="headerlink" title="破解超级用户root的密码"></a>破解超级用户root的密码</h1><p> Centos 7重置root密码</p>
<ol>
<li><p>重启系统，在grub引导菜单，选择第一项，按e编辑启动配置文件 </p>
</li>
<li><p>找到 linux16开头的行，在该行最后添加rd.break</p>
</li>
<li><p>按crtl+x启动</p>
</li>
<li><p>以读写的方式挂载根目录 </p>
<blockquote>
<p>mount -o remount,rw /sysroot </p>
</blockquote>
</li>
<li><p>切换根目录</p>
<blockquote>
<p>chroot /sysroot     </p>
</blockquote>
</li>
<li><p>使用passwd命令重置密码(注意bug乱码)</p>
</li>
<li><p>创建重置SELinux安全上下文的文件 </p>
<blockquote>
<p>touch /.autorelabel    </p>
</blockquote>
</li>
<li><p>敲两次exit退出重启即可 </p>
</li>
</ol>
<h1 id="高级权限"><a href="#高级权限" class="headerlink" title="高级权限"></a>高级权限</h1><h2 id="UMASK反掩码"><a href="#UMASK反掩码" class="headerlink" title="UMASK反掩码"></a>UMASK反掩码</h2><p>root用户反掩码: 0022<br>普通用户反掩码: 0002</p>
<h3 id="如何查看反掩码"><a href="#如何查看反掩码" class="headerlink" title="如何查看反掩码"></a>如何查看反掩码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">umask</span></span><br></pre></td></tr></table></figure>

<h3 id="UMASK反掩码的作用"><a href="#UMASK反掩码的作用" class="headerlink" title="UMASK反掩码的作用"></a>UMASK反掩码的作用</h3><p>目录的缺省权限值=777-UMASK反掩码<br>文件的缺省权限值=777-UMASK反掩码-111</p>
<h3 id="如何修改UMASK反掩码"><a href="#如何修改UMASK反掩码" class="headerlink" title="如何修改UMASK反掩码"></a>如何修改UMASK反掩码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接修改即可</span></span><br><span class="line"><span class="built_in">umask</span> 0011</span><br><span class="line">*************************</span><br><span class="line"><span class="comment"># root用户测试</span></span><br><span class="line"><span class="built_in">umask</span></span><br><span class="line"></span><br><span class="line">mkdir 1111</span><br><span class="line">touch 1111.txt</span><br><span class="line">*************************</span><br><span class="line"><span class="comment"># 普通用户测试</span></span><br><span class="line">useradd lisi</span><br><span class="line">su - lisi</span><br><span class="line"><span class="comment"># 查看普通用户反掩码</span></span><br><span class="line"><span class="built_in">umask</span></span><br><span class="line"><span class="comment"># 修改普通用户反掩码</span></span><br><span class="line"><span class="built_in">umask</span> 0011</span><br><span class="line"></span><br><span class="line">mkdir 1111</span><br><span class="line">touch 1111.txt</span><br></pre></td></tr></table></figure>

<h2 id="SUID权限弥补"><a href="#SUID权限弥补" class="headerlink" title="SUID权限弥补"></a>SUID权限弥补</h2><p>主要针对<code>文件</code><br>文件所有者执行位变为s或S(之前有x则为s,之前无x则为S,不懂的话没关系,继续往下看)</p>
<h3 id="usr-bin-passwd"><a href="#usr-bin-passwd" class="headerlink" title="/usr/bin/passwd"></a>/usr/bin/passwd</h3><p>passwd命令执行的脚本文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ll /usr/bin/passwd  <span class="comment">#可以看到文件所有者的执行位为s</span></span><br><span class="line"></span><br><span class="line">-rwsr-xr-x. 1 root root 27832 Jun 10  2014 /usr/bin/passwd</span><br></pre></td></tr></table></figure>

<h3 id="测试SUID"><a href="#测试SUID" class="headerlink" title="测试SUID"></a>测试SUID</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建一个普通用户</span></span><br><span class="line">useradd a001</span><br><span class="line">passwd a001</span><br><span class="line"><span class="comment"># 切换至该普通用户</span></span><br><span class="line">su - a001</span><br><span class="line"><span class="comment"># 尝试修改该用户的密码</span></span><br><span class="line"><span class="comment"># 首先输入旧的密码,然后输入两遍新的密码</span></span><br><span class="line">passwd</span><br><span class="line"><span class="comment"># 如果看到最后的提示字样 successfully,那么修改成功</span></span><br><span class="line"></span><br><span class="line">**********************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回root用户,去除passwd文件的SUID高级权限</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">chmod u<span class="_">-s</span> /usr/bin/passwd   <span class="comment">#去掉s后,普通用户便不可以自己修改密码</span></span><br><span class="line">ll /usr/bin/passwd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再次切换到普通用户进行测试</span></span><br><span class="line">su - a001</span><br><span class="line">passwd</span><br><span class="line"></span><br><span class="line"><span class="comment"># passwd: Authentication token manipulation error</span></span><br><span class="line"><span class="comment"># 如果最后出现 error 的字样,说明该用户自己已经无法修改密码,只能root超级管理员来修改</span></span><br></pre></td></tr></table></figure>

<h3 id="s与S的区别"><a href="#s与S的区别" class="headerlink" title="s与S的区别"></a>s与S的区别</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在上一步的基础上继续</span></span><br><span class="line">chmod u+s,u-x /usr/bin/passwd</span><br><span class="line">ll /usr/bin/passwd  <span class="comment">#会发现所有者执行位变为了S</span></span><br><span class="line"></span><br><span class="line">chmod u+x /usr/bin/passwd</span><br><span class="line">ll /usr/bin/passwd  <span class="comment">#会发现所有者执行位变为了s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 经过我的测试,无论是S还是s,都可以普通用户自己修改密码</span></span><br></pre></td></tr></table></figure>

<h2 id="SGID权限弥补"><a href="#SGID权限弥补" class="headerlink" title="SGID权限弥补"></a>SGID权限弥补</h2><p>主要针对目录</p>
<p>如果给某个目录加上了SGID高级,那么在这个文件中创建目录或者创建新文件,都将会继承这个目录的组</p>
<p>下面用例子来演示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个新组</span></span><br><span class="line">groupadd qqq</span><br><span class="line"><span class="comment"># 在根目录下创建一个新目录</span></span><br><span class="line">mkdir /111</span><br><span class="line"><span class="comment"># 更改目录111的组</span></span><br><span class="line">chown :qqq /111</span><br><span class="line"><span class="comment"># 查看111目录</span></span><br><span class="line">ll /111</span><br><span class="line"><span class="comment"># 给111目录增加高级权限SGID</span></span><br><span class="line">chmod g+s /111</span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line">mkdir /111/222</span><br><span class="line">touch /111/222.txt</span><br><span class="line">ll /111/</span><br></pre></td></tr></table></figure>

<h2 id="STICK粘滞位"><a href="#STICK粘滞位" class="headerlink" title="STICK粘滞位"></a>STICK粘滞位</h2><p>主要针对共享目录</p>
<p>组外(其他用户)的执行位变为t</p>
<p>linux中根目录下的tmp目录就是经典的例子</p>
<p>示例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在根目录下创建一个共享目录share</span></span><br><span class="line">mkdir /share</span><br><span class="line"><span class="comment"># 给share目录高级权限STICK</span></span><br><span class="line">chmod o+t,o+w /share</span><br><span class="line"><span class="comment">#创建两个新用户</span></span><br><span class="line">useradd zhangsan</span><br><span class="line">useradd lisi</span><br><span class="line"><span class="comment"># 切换至其中一个用户</span></span><br><span class="line">su - zhangsan</span><br><span class="line"><span class="comment"># 在/share共享目录下新建一个以该用户为名的txt文件</span></span><br><span class="line">touch /share/zhangsan.txt</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 切换至另一个用户</span></span><br><span class="line">su - lisi</span><br><span class="line"><span class="comment"># 查看共享目录下的文件</span></span><br><span class="line">ll /share/</span><br><span class="line"><span class="comment"># 试着删除该文件</span></span><br><span class="line">rm -rf /share/zhangsan.txt</span><br><span class="line"><span class="comment"># 出现如下提示</span></span><br><span class="line">rm: 无法删除<span class="string">"/share/zhangsan.txt"</span>: 不允许的操作</span><br></pre></td></tr></table></figure>

<h2 id="ACL访问控制列表"><a href="#ACL访问控制列表" class="headerlink" title="ACL访问控制列表"></a>ACL访问控制列表</h2><p>针对目录和文件</p>
<p>可以对一个文件设置用户的访问权限</p>
<h3 id="设置文件的ACL信息"><a href="#设置文件的ACL信息" class="headerlink" title="设置文件的ACL信息"></a>设置文件的ACL信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在根目录下新建一个txt文件</span></span><br><span class="line">touch /123.txt</span><br><span class="line"><span class="comment"># 为123.txt设置acl</span></span><br><span class="line">setfacl -m u:zhangsan:rw- /123.txt  <span class="comment">#设置用户zhangsan访问123.txt的权限只有读和写,没有执行权限</span></span><br><span class="line">setfacl -m u:lisi:r-- /123.txt</span><br><span class="line"><span class="comment"># 查看123.txt,会发现后面多了一个加号+</span></span><br><span class="line">ll /</span><br><span class="line"><span class="comment"># 查看acl信息</span></span><br><span class="line">getfacl /123.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line">su - zhangsan</span><br><span class="line">vim /123.txt    <span class="comment">#写入内容,保存退出,成功</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">su - lisi</span><br><span class="line">vim /123.txt    <span class="comment">#写入内容,保存退出提示不可写入</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<h3 id="设置目录的ACL信息"><a href="#设置目录的ACL信息" class="headerlink" title="设置目录的ACL信息"></a>设置目录的ACL信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir /456</span><br><span class="line"><span class="comment"># 参数d表示在/456目录下新建目录或文件会自动继承目录/456的ACL信息</span></span><br><span class="line"><span class="comment"># 但要注意:ACL的真正效果仍然体现在对文件的操作上,对文件修改时才能看出效果</span></span><br><span class="line">setfacl -m d:u:zhangsan:rwx /456</span><br><span class="line"><span class="built_in">cd</span> /456</span><br><span class="line">touch ttt.txt</span><br><span class="line">getfacl ttt.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当复制一个具有ACl属性的文件或目录时,默认情况下,ACL属性值是不会复制过去的</span></span><br><span class="line"><span class="comment"># 只有在 cp 后加上 -p 参数才可以</span></span><br><span class="line">cp -p ttt.txt /tmp/cp_ttt.txt</span><br><span class="line"><span class="comment"># 如果移动一个具有ACL属性的文件或目录时,则会同时把ACL属性移动过去</span></span><br></pre></td></tr></table></figure>

<h3 id="删除ACL信息"><a href="#删除ACL信息" class="headerlink" title="删除ACL信息"></a>删除ACL信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不彻底的删除方式</span></span><br><span class="line">setfacl -x u:lisi /123.txt  <span class="comment">#虽然去掉了lisi的权限,但是使用ll进行查看, + 号仍然存在</span></span><br><span class="line">getfacl /123.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 彻底的删除一个文件或者目录的所有的ACL信息</span></span><br><span class="line">chacl -B /123.txt</span><br></pre></td></tr></table></figure>

<h3 id="chmod知识补充"><a href="#chmod知识补充" class="headerlink" title="chmod知识补充"></a>chmod知识补充</h3><p>sst = 421 = 7</p>
<p>chmod 7777 test.txt     相当于     rwsrwsrwt<br>chmod 6777 test.txt     相当于     rwsrwsrwx<br>chmod 4777 test.txt     相当于     rwsrwxrwx</p>
<p>以此类推</p>
<h1 id="RPM软件包及YUM软件仓库的使用"><a href="#RPM软件包及YUM软件仓库的使用" class="headerlink" title="RPM软件包及YUM软件仓库的使用"></a>RPM软件包及YUM软件仓库的使用</h1><h2 id="RPM软件包的使用技巧"><a href="#RPM软件包的使用技巧" class="headerlink" title="RPM软件包的使用技巧"></a>RPM软件包的使用技巧</h2><p>现在基本不用rpm了,但是应该还是要了解一下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如何查询指定软件包是否安装</span></span><br><span class="line">rpm -q vsftpd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如何安装指定软件包</span></span><br><span class="line"><span class="comment"># i:立即安装</span></span><br><span class="line"><span class="comment"># v:显示安装进度</span></span><br><span class="line"><span class="comment"># 哈希进度提示</span></span><br><span class="line">rpm -ivh ftp-0.17-51.1.el6.i686.rpm</span><br><span class="line"><span class="comment"># 如何删除指定软件包</span></span><br><span class="line">rpm -e ftp  <span class="comment">#问题：依赖性关系(rpm -e httpd)</span></span><br></pre></td></tr></table></figure>

<h2 id="镜像文件的回环挂载"><a href="#镜像文件的回环挂载" class="headerlink" title="镜像文件的回环挂载"></a>镜像文件的回环挂载</h2><h3 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h3><p>回环设备（ ‘loopback device’）允许用户以一个普通磁盘文件虚拟一个块设备。设想一个磁盘设备，对它的所有读写操作都将被重定向到读写一个名为 disk-image 的普通文件而非操作实际磁盘或分区的轨道和扇区。（当然，disk-image 必须存在于一个实际的磁盘上，而这个磁盘必须比虚拟的磁盘容量更大。）回环设备允许你这样使用一个普通文件。</p>
<h3 id="回环挂载的用法"><a href="#回环挂载的用法" class="headerlink" title="回环挂载的用法"></a>回环挂载的用法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看centos镜像文件的大小</span></span><br><span class="line">du -sh CentOS-7-x86_64-DVD-1511.iso</span><br><span class="line"><span class="comment"># 创建挂载目录</span></span><br><span class="line">mkdir /mnt/iso</span><br><span class="line"><span class="comment"># 回环挂载</span></span><br><span class="line"><span class="comment"># 注意自己镜像的位置和名称,没有镜像需要自己上传或下载到本地</span></span><br><span class="line">mount -o loop /CentOS-7-x86_64-DVD-1511.iso /mnt/iso</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/iso</span><br><span class="line">ll</span><br><span class="line"><span class="comment"># 查看映射情况</span></span><br><span class="line">df -Th</span><br></pre></td></tr></table></figure>

<h3 id="卸载目录的方法"><a href="#卸载目录的方法" class="headerlink" title="卸载目录的方法"></a>卸载目录的方法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接卸载即可</span></span><br><span class="line">umount /mnt/iso</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/iso</span><br><span class="line">ll</span><br><span class="line">df -Th</span><br></pre></td></tr></table></figure>

<h2 id="YUM软件仓库的配置及使用"><a href="#YUM软件仓库的配置及使用" class="headerlink" title="YUM软件仓库的配置及使用"></a>YUM软件仓库的配置及使用</h2><h3 id="修改YUM软件仓库的配置文件"><a href="#修改YUM软件仓库的配置文件" class="headerlink" title="修改YUM软件仓库的配置文件"></a>修改YUM软件仓库的配置文件</h3><p><strong>一定要将目录切换到YUM软件仓库的工作目录/etc/yum.repos.d/下才有效</strong><br><strong>工作目录下的配置文件必须以.repo结尾</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line">vim centos7.repo</span><br><span class="line"><span class="comment"># 录入五个参数</span></span><br><span class="line">********************************</span><br><span class="line">[base]                      </span><br><span class="line">name=CentOS7</span><br><span class="line">baseurl=file:///mnt/iso</span><br><span class="line">enabled=1  </span><br><span class="line">gpgcheck=0</span><br><span class="line">********************************</span><br><span class="line"><span class="comment"># ⬆️baseurl要填写绝对路径</span></span><br><span class="line"><span class="comment"># ⬆️enabled 为启用软件仓库</span></span><br><span class="line"><span class="comment"># ⬆️gpgcheck 为不校验软件包</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证软件仓库的方法</span></span><br><span class="line">yum clean all</span><br><span class="line">yum list    <span class="comment">#会看到很多个软件包</span></span><br></pre></td></tr></table></figure>

<h3 id="YUM常见命令使用技巧"><a href="#YUM常见命令使用技巧" class="headerlink" title="YUM常见命令使用技巧"></a>YUM常见命令使用技巧</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询指定的软件包</span></span><br><span class="line">yum search vsftpd</span><br><span class="line"><span class="comment"># 查询指定软件的详细信息</span></span><br><span class="line"><span class="comment"># 可以判断该软件包是否安装</span></span><br><span class="line">yum info vsftpd</span><br><span class="line"><span class="comment"># 如何安装指定的软件包</span></span><br><span class="line">yum install vsftpd</span><br><span class="line"><span class="comment"># 如何删除指定的软件包</span></span><br><span class="line">yum erase vsftpd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 成组删除</span></span><br><span class="line">yum grouplist</span><br><span class="line"><span class="comment"># 如果要显示成功安装信息，则之前系统中应该没有装vsftpd包才可以</span></span><br><span class="line">yum groupinstall <span class="string">'FTP Server'</span></span><br><span class="line">yum groupinstall <span class="string">'PHP 支持'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询可用软件包的版本全称</span></span><br><span class="line">yum whatprovides vim</span><br></pre></td></tr></table></figure>

<h3 id="通过指定的FTP服务器设置YUM软件仓库源"><a href="#通过指定的FTP服务器设置YUM软件仓库源" class="headerlink" title="通过指定的FTP服务器设置YUM软件仓库源"></a>通过指定的FTP服务器设置YUM软件仓库源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[base]</span><br><span class="line">name=centos7</span><br><span class="line">baseurl=ftp://10.226.41.226/centos7</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>

<h3 id="通过真实的CentOS7服务器作为YUM软件仓库源"><a href="#通过真实的CentOS7服务器作为YUM软件仓库源" class="headerlink" title="通过真实的CentOS7服务器作为YUM软件仓库源"></a>通过真实的CentOS7服务器作为YUM软件仓库源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line">ls</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">gzip centos7.repo</span><br><span class="line"><span class="comment"># 释放压缩</span></span><br><span class="line">gunzip CentOS-Base.repo.gz</span><br><span class="line">cat CentOS-Base.repo</span><br><span class="line"><span class="comment"># 注意：一定要保证在连接外网的前提下测试</span></span><br><span class="line">yum clean all</span><br><span class="line"><span class="comment"># yum repolist 会出现 11,971个包</span></span><br><span class="line">yum -y install mariadb-server</span><br></pre></td></tr></table></figure>

<h3 id="YUM软件仓库源常见错误的解决方法（yum-PID）"><a href="#YUM软件仓库源常见错误的解决方法（yum-PID）" class="headerlink" title="YUM软件仓库源常见错误的解决方法（yum.PID）"></a>YUM软件仓库源常见错误的解决方法（yum.PID）</h3><p>解决方法：按照提示信息将对应文件/run/yum.pid删除即可。</p>
<h1 id="Crontab定时任务"><a href="#Crontab定时任务" class="headerlink" title="Crontab定时任务"></a>Crontab定时任务</h1><h2 id="用户定时任务的使用技巧"><a href="#用户定时任务的使用技巧" class="headerlink" title="用户定时任务的使用技巧"></a>用户定时任务的使用技巧</h2><h3 id="用户定时任务的格式"><a href="#用户定时任务的格式" class="headerlink" title="用户定时任务的格式"></a>用户定时任务的格式</h3><p>Minute  Hour     Day    Month   DayofWeek   Command<br>分钟     小时      天      月       星期         命令</p>
<h3 id="设置用户定时任务的步骤："><a href="#设置用户定时任务的步骤：" class="headerlink" title="设置用户定时任务的步骤："></a>设置用户定时任务的步骤：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换用户身份</span></span><br><span class="line">su - zhangsan</span><br><span class="line"><span class="comment"># 设置定时任务</span></span><br><span class="line">crontab -e  <span class="comment">#编辑该用户定时任务</span></span><br><span class="line">crontab -l  <span class="comment">#查看该用户定时任务</span></span><br><span class="line">crontab -r  <span class="comment">#删除该用户定时任务</span></span><br></pre></td></tr></table></figure>

<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a.zhangsan用户创建定时任务，要求：每天下午5:00关机。</span></span><br><span class="line">su - zhangsan</span><br><span class="line">crontab -e</span><br><span class="line">0 17 * * * shutdown -h now</span><br><span class="line"></span><br><span class="line"><span class="comment"># b.lisi用户创建定时任务，要求：周一至周五朝九晚五每分钟发一条消息(wall 命令进行测试)。</span></span><br><span class="line">su - lisi</span><br><span class="line">crontab -e</span><br><span class="line">* 9-17 * * 1-5 wall <span class="string">"hello,I'am lisi"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># c.lisi用户创建定时任务，要求：周一至周五朝九晚五每两小时发一条消息。</span></span><br><span class="line">* 9-17/2 * * 1-5 wall <span class="string">"hello,I'am lisi"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># d.lisi用户创建定时任务，要求：周一至周五朝九晚五每两隔10分钟发一条消息。</span></span><br><span class="line">*/10 9-17 * * 1-5 wall <span class="string">"hello,I'am lisi"</span></span><br></pre></td></tr></table></figure>

<h3 id="管理员对用户定时任务的管理方法"><a href="#管理员对用户定时任务的管理方法" class="headerlink" title="管理员对用户定时任务的管理方法"></a>管理员对用户定时任务的管理方法</h3><p>方法一：/var/spool/cron 用户定时任务的工作目录(查看;修改;删除),如果用户设置过定时任务,那么在该目录下会有与用户同名的文件</p>
<p>方法二：crontab -u lisi -l | -e | -r</p>
<h3 id="用户定时任务的高级管理技巧"><a href="#用户定时任务的高级管理技巧" class="headerlink" title="用户定时任务的高级管理技巧"></a>用户定时任务的高级管理技巧</h3><p>黑名单文件  /etc/cron.deny      //默认存在<br>白名单文件  /etc/cron.allow     //默认不存在,使用时,应删除cron.deny文件,再创建cron.allow文件,只有在cron.allow文件里的用户才可以设置定时任务</p>
<h2 id="系统定时任务的使用技巧"><a href="#系统定时任务的使用技巧" class="headerlink" title="系统定时任务的使用技巧"></a>系统定时任务的使用技巧</h2><h3 id="系统定时任务的工作目录"><a href="#系统定时任务的工作目录" class="headerlink" title="系统定时任务的工作目录"></a>系统定时任务的工作目录</h3><p>/etc/cron.daily/   日志回滚文件,该目录下的脚本文件每天会自动运行一次(触发时间:4:22)</p>
<p>/etc/cron.hourly/  该目录下的脚本文件每小时（第一分钟）会自动运行一次</p>
<p>/etc/cron.weekly   该目录下的脚本文件每星期（周日的4:22）会自动运行一次</p>
<p>/etc/cron.monthly/ 该目录下的脚本文件每个月（1号的4:22）会自动运行一次</p>
<h3 id="anacron系统"><a href="#anacron系统" class="headerlink" title="anacron系统"></a>anacron系统</h3><p>原理：系统定时任务的触发时间由于某种原因(例如停电)而错过了，anacron系统会保证<br>系统定时任务工作目录下的脚本会弥补运行的一种机制。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/anacrontab</span><br><span class="line"></span><br><span class="line"><span class="comment">#period in days   delay in minutes   job-identifier   command</span></span><br><span class="line">1       5       cron.daily              nice run-parts /etc/cron.daily</span><br><span class="line">7       25      cron.weekly             nice run-parts /etc/cron.weekly</span><br><span class="line">@monthly 45     cron.monthly            nice run-parts /etc/cron.monthly</span><br></pre></td></tr></table></figure>

<h1 id="FS-Management-文件系统管理"><a href="#FS-Management-文件系统管理" class="headerlink" title="FS Management(文件系统管理)"></a>FS Management(文件系统管理)</h1><h2 id="Linux下的磁盘分区及其表示方法"><a href="#Linux下的磁盘分区及其表示方法" class="headerlink" title="Linux下的磁盘分区及其表示方法"></a>Linux下的磁盘分区及其表示方法</h2><h3 id="磁盘的表示方法"><a href="#磁盘的表示方法" class="headerlink" title="磁盘的表示方法"></a>磁盘的表示方法</h3><p>/dev/sda—第一块磁盘(针对SCSI或串口磁盘)<br>/dev/sdb—第二块磁盘<br>/dev/sdc—第三块磁盘</p>
<p>/dev/hda,/dev/hdb,/dev/hdc,….(传统的IDE磁盘)<br>/dev/vda,/dev/vdb,/dev/vdc(虚拟磁盘)</p>
<h3 id="分区的表示方法"><a href="#分区的表示方法" class="headerlink" title="分区的表示方法"></a>分区的表示方法</h3><p>/dev/sda1—第一块磁盘的第一个分区<br>/dev/sda2—第一块磁盘的第二个分区<br>/dev/sdb1—第二块磁盘的第一个分区<br>/dev/hda1—第一块磁盘的第一个分区(传统的IDE磁盘)<br>/dev/vdc5<br>/dev/vdb3</p>
<h3 id="主分区-扩展分区和逻辑分区"><a href="#主分区-扩展分区和逻辑分区" class="headerlink" title="主分区,扩展分区和逻辑分区"></a>主分区,扩展分区和逻辑分区</h3><p>一块400G的硬盘<br>C—100G—/dev/sda1(主)<br>D—50G—/dev/sda2(主)<br>E—50G—/dev/sda3(主)<br>/dev/sda4(扩展分区)<br>    F—50G—/dev/sda5<br>    G—50G—/dev/sda6<br>    H—50G—/dev/sda7<br>    I—50G—/dev/sda8</p>
<p><strong>结论：</strong></p>
<ul>
<li>主分区的个数至多4个；</li>
<li>扩展分区是一个容器，其中可以包含多个逻辑分区；</li>
<li>扩展分区的大小=各个逻辑分区大小之和+未划分的扩展分区大小；</li>
<li>真正能使用的数据分区只能是主分区或者逻辑分区；</li>
<li>磁盘的剩余空间 = 扩展分区 - 各逻辑分区之和；</li>
</ul>
<h2 id="为虚拟机添加一块磁盘"><a href="#为虚拟机添加一块磁盘" class="headerlink" title="为虚拟机添加一块磁盘"></a>为虚拟机添加一块磁盘</h2><p>双击虚拟机 -&gt; show  virtual machine details(灯泡的图案) -&gt; virtIO Disk 1 -&gt; 下方add hardword -&gt; bus type(scsi) -&gt; finish</p>
<h2 id="fdisk命令的使用技巧"><a href="#fdisk命令的使用技巧" class="headerlink" title="fdisk命令的使用技巧"></a>fdisk命令的使用技巧</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看是否添加成功</span></span><br><span class="line">df -Th</span><br><span class="line"><span class="comment"># 为磁盘创建分区</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面是选项,n是添加分区,t是改变分区类型</span></span><br><span class="line">m   <span class="built_in">print</span> this menu</span><br><span class="line">p   <span class="built_in">print</span> the partition table</span><br><span class="line">d   delete a partition(删除分区时，必须从后往前一个一个删除)</span><br><span class="line">n   add a new partition(创建分区时，必须从前往后一个一个创建)</span><br><span class="line">t   change a partitions system id</span><br><span class="line">l   list known partition types</span><br><span class="line">    <span class="comment"># 常用分区类型</span></span><br><span class="line">    5  Extended</span><br><span class="line">    7  HPFS/NTFS</span><br><span class="line">    b  W95 FAT32</span><br><span class="line">    82  Linux swap</span><br><span class="line">    83  Linux –---------xfs, ext4, ext3,ext2</span><br><span class="line">    8e  Linux LVM</span><br><span class="line"></span><br><span class="line">w   write table to disk and <span class="built_in">exit</span></span><br><span class="line">q   quit without saving changes</span><br><span class="line"></span><br><span class="line">The device presents a logical sector size that is smaller than</span><br><span class="line">the physical sector size. Aligning to a physical sector (or optimal</span><br><span class="line">I/O) size boundary is recommended, or performance may be impacted.</span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line"></span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line"></span><br><span class="line">********************************************************************</span><br><span class="line">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">演示⬇️</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1️⃣第一步:添加分区,有些地方默认回车就可以,到 LAST 扇区 那里,需要填好分区的大小</span></span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (2 primary, 0 extended, 2 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">分区号 (3,4，默认 3)：</span><br><span class="line">起始 扇区 (21979136-67108863，默认为 21979136)：</span><br><span class="line">将使用默认值 21979136</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (21979136-67108863，默认为 67108863)：+5G</span><br><span class="line">分区 3 已设置为 Linux 类型，大小设为 5 GiB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2️⃣第二步:p命令查看是否添加成功</span></span><br><span class="line">命令(输入 m 获取帮助)：p</span><br><span class="line"></span><br><span class="line">磁盘 /dev/sdb：34.4 GB, 34359738368 字节，67108864 个扇区</span><br><span class="line">Units = 扇区 of 1 * 512 = 512 bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 4096 字节</span><br><span class="line">I/O 大小(最小/最佳)：4096 字节 / 4096 字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：0x6bfb58cf</span><br><span class="line"></span><br><span class="line">   设备 Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048    20973567    10485760   83  Linux</span><br><span class="line">/dev/sdb2        20973568    21979135      502784   82  Linux swap / Solaris</span><br><span class="line">/dev/sdb3        21979136    32464895     5242880   83  Linux</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3️⃣第三步:改变分区的类型</span></span><br><span class="line">命令(输入 m 获取帮助)：t</span><br><span class="line">分区号 (1-3，默认 3)：3</span><br><span class="line">Hex 代码(输入 L 列出所有代码)：82</span><br><span class="line">已将分区“Linux”的类型更改为“Linux swap / Solaris”</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4️⃣第四步:再次查看是否改变成功</span></span><br><span class="line">命令(输入 m 获取帮助)：p</span><br><span class="line"></span><br><span class="line">磁盘 /dev/sdb：34.4 GB, 34359738368 字节，67108864 个扇区</span><br><span class="line">Units = 扇区 of 1 * 512 = 512 bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 4096 字节</span><br><span class="line">I/O 大小(最小/最佳)：4096 字节 / 4096 字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：0x6bfb58cf</span><br><span class="line"></span><br><span class="line">   设备 Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048    20973567    10485760   83  Linux</span><br><span class="line">/dev/sdb2        20973568    21979135      502784   82  Linux swap / Solaris</span><br><span class="line">/dev/sdb3        21979136    32464895     5242880   82  Linux swap / Solaris</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5️⃣第五步:保存退出</span></span><br><span class="line">命令(输入 m 获取帮助)：w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line"></span><br><span class="line">WARNING: Re-reading the partition table failed with error 16: 设备或资源忙.</span><br><span class="line">The kernel still uses the old table. The new table will be used at</span><br><span class="line">the next reboot or after you run partprobe(8) or kpartx(8)</span><br><span class="line">正在同步磁盘。</span><br></pre></td></tr></table></figure>

<h2 id="更新磁盘分区表的方法"><a href="#更新磁盘分区表的方法" class="headerlink" title="更新磁盘分区表的方法"></a>更新磁盘分区表的方法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不重启,立即生效</span></span><br><span class="line">partprobe</span><br><span class="line"><span class="comment"># 重启后生效</span></span><br><span class="line">reboot</span><br><span class="line"><span class="comment"># 检查分区是否格式化成功</span></span><br><span class="line">cat /proc/partitions</span><br></pre></td></tr></table></figure>

<h2 id="格式化磁盘分区的方法"><a href="#格式化磁盘分区的方法" class="headerlink" title="格式化磁盘分区的方法"></a>格式化磁盘分区的方法</h2><p>常用格式:ext2,ext3,ext4,xfs,swap,vfat</p>
<p>(1)mkfs.xfs /dev/sdb1<br>(2)mkfs.ext4 /dev/sdb2<br>(3)mkfs.ext3 /dev/sdb5<br>(4)mkfs.vfat /dev/sdb3  (注意:在使用fdisk创建/dev/sdb3时,要将其类型修改为FAT32格式)<br>(5)mkswap /dev/sdb6 (注意:在使用fdisk创建/dev/sdb6时,要将其类型修改为SWAP格式)</p>
<p><strong>注意：</strong>在格式化vfat的时候，会提示-bash: mkfs.vfat: command not found</p>
<p><strong>解决：</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 查询</span></span><br><span class="line">yum provides mkfs.vfat <span class="comment">#或者 yum whatprovides mkfs.vfat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 复制查询出的包名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 安装</span></span><br><span class="line">yum -y install dosfstools.x86_64</span><br></pre></td></tr></table></figure>

<h2 id="使用分区存放数据"><a href="#使用分区存放数据" class="headerlink" title="使用分区存放数据"></a>使用分区存放数据</h2><h3 id="方法一-手动挂载"><a href="#方法一-手动挂载" class="headerlink" title="方法一:手动挂载"></a>方法一:手动挂载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个挂载目录</span></span><br><span class="line">mkdir /mmm1</span><br><span class="line"><span class="comment"># 挂载</span></span><br><span class="line">mount /dev/sdb2 /mmm1</span><br><span class="line"><span class="comment"># 检查</span></span><br><span class="line">df -Th(要知道各个字段信息的含义)</span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line"><span class="built_in">cd</span> /mmm1</span><br><span class="line">touch 111.txt</span><br><span class="line">mkdir 111</span><br><span class="line"><span class="comment"># 卸载目录</span></span><br><span class="line">umount /mmm1</span><br><span class="line">df -Th</span><br></pre></td></tr></table></figure>

<h3 id="方法二-自动挂载"><a href="#方法二-自动挂载" class="headerlink" title="方法二:自动挂载"></a>方法二:自动挂载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/fstab</span><br><span class="line"><span class="comment"># 文件前三个字段的含义</span></span><br><span class="line"><span class="comment"># 设备文件名/dev/sda1   挂载目标目录/   设备文件名对应的分区的类型ext4</span></span><br><span class="line">/dev/sdb2               /mmm1                   ext4    defaults        0 0</span><br><span class="line"><span class="comment"># 查看挂载情况</span></span><br><span class="line">df -Th  <span class="comment">#发现没有挂载上</span></span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">mount -a</span><br><span class="line"><span class="comment"># 再次查看,挂载成功</span></span><br><span class="line">df -Th</span><br></pre></td></tr></table></figure>

<h3 id="方法三-UUID挂载"><a href="#方法三-UUID挂载" class="headerlink" title="方法三:UUID挂载"></a>方法三:UUID挂载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">blkid   <span class="comment">#显示已格式化的分区的UUID信息</span></span><br><span class="line"><span class="comment"># 注意：各物理设备的 UUID 号是系统定义好的，唯一的，用户无法修改。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法一：通过mount命令实现手动挂载</span></span><br><span class="line">mount UUID=<span class="string">"0ef71ac1-ac8a-4be9-821e-d98bc21e23f7"</span> /sdb1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二:通过/etc/fstab文件实现开机自动挂载</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line">    UUID=<span class="string">"0ef71ac1-ac8a-4be9-821e-d98bc21e23f7"</span> /sdb1  ext4  defaults  0 0</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">mount -a</span><br></pre></td></tr></table></figure>

<h1 id="swap交换分区的管理"><a href="#swap交换分区的管理" class="headerlink" title="swap交换分区的管理"></a>swap交换分区的管理</h1><h2 id="物理分区实现swap分区大小的变化"><a href="#物理分区实现swap分区大小的变化" class="headerlink" title="物理分区实现swap分区大小的变化"></a>物理分区实现swap分区大小的变化</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看内存的详细信息，其中包括交换分区的大小</span></span><br><span class="line">free     </span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:        1877420      157032     1530176        9108      190212     1568576</span><br><span class="line">Swap:       2097148           0     2097148</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看swap分区的信息 </span></span><br><span class="line">cat /proc/swaps  </span><br><span class="line"><span class="comment"># 或(两者效果相同)</span></span><br><span class="line">swapon -s</span><br><span class="line"></span><br><span class="line">文件名				类型		大小	已用	权限</span><br><span class="line">/dev/dm-1        partition	2097148	   0	  -2</span><br></pre></td></tr></table></figure>

<h2 id="计算swap的差值"><a href="#计算swap的差值" class="headerlink" title="计算swap的差值"></a>计算swap的差值</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 要求将swap分区调整到2600000K</span></span><br><span class="line"><span class="comment"># 已有swap分区大小为 2097148k</span></span><br><span class="line"><span class="comment"># 使用 expr 命令来计算剩余所需大小</span></span><br><span class="line">expr 2600000 - 2097148</span><br><span class="line">502852  <span class="comment">#需要创建一个502852k大小的swap分区</span></span><br></pre></td></tr></table></figure>

<h2 id="创建一个大小为502852大小的物理分区并将该分区类型修改为swap"><a href="#创建一个大小为502852大小的物理分区并将该分区类型修改为swap" class="headerlink" title="创建一个大小为502852大小的物理分区并将该分区类型修改为swap"></a>创建一个大小为502852大小的物理分区并将该分区类型修改为swap</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建分区并修改类型(不会的同学翻阅上一节笔记,不要懒惰哦😊)</span></span><br><span class="line">fdisk /dev/sdb  <span class="comment"># swap的代号为 82</span></span><br><span class="line"><span class="comment"># 格式化/dev/sda1 的磁盘</span></span><br><span class="line">mkswap /dev/sdb2</span><br><span class="line"><span class="comment"># 修改/etc/fstab文件实现开机自动挂载</span></span><br><span class="line"><span class="comment"># 永久生效!!!</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line">/dev/sdb2    swap  swap    defaults     0 0</span><br><span class="line"><span class="comment"># 注意：修改完开机自动挂载文件/etc/fstab后，使用mount -a 命令对SWAP分区无效</span></span><br><span class="line"><span class="comment"># 必须重启!!!!!!!!!!!!!!!!</span></span><br><span class="line">swapon -s   <span class="comment"># 发现没有sdb2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 手动挂载,激活交换分区</span></span><br><span class="line">swapon /dev/sda1</span><br><span class="line"><span class="comment"># 验证</span></span><br><span class="line">swapon -s</span><br><span class="line">free</span><br><span class="line"><span class="comment"># 手动卸载</span></span><br><span class="line">swapoff /dev/sda1</span><br><span class="line">swapon -s</span><br></pre></td></tr></table></figure>

<h1 id="LVM逻辑卷管理"><a href="#LVM逻辑卷管理" class="headerlink" title="LVM逻辑卷管理"></a>LVM逻辑卷管理</h1><h2 id="物理分区和物理卷"><a href="#物理分区和物理卷" class="headerlink" title="物理分区和物理卷"></a>物理分区和物理卷</h2><p>逻辑过程:</p>
<p>物理分区 -&gt; 物理卷</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建分区</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line"><span class="comment"># 创建物理卷</span></span><br><span class="line">pvcreate /dev/sdb5</span><br><span class="line"><span class="comment"># 删除物理卷</span></span><br><span class="line"><span class="comment"># 如果该物理卷已经加入到了 卷组 中,并且该 卷组 已经创建了 逻辑卷</span></span><br><span class="line"><span class="comment"># 那么应该首先释放该 物理卷 中的 PE 块, pvmove /dev/sdb5</span></span><br><span class="line"><span class="comment"># 然后把该物理卷从 卷组 中移除, vgreduce vg9 /dev/sdb5</span></span><br><span class="line"><span class="comment"># 然后就可以删除 物理卷 了</span></span><br><span class="line">pvremove /dev/sdb5</span><br><span class="line"><span class="comment"># 查看物理卷</span></span><br><span class="line">pvdisplay</span><br></pre></td></tr></table></figure>

<h2 id="卷组"><a href="#卷组" class="headerlink" title="卷组"></a>卷组</h2><p>关系: 物理卷 + 物理卷 + … = 卷组<br>卷组可以包含多个物理卷并且卷组的大小可以动态的调整</p>
<p>如何创建卷组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式: vgcreate 卷组名 物理卷1 物理卷2 ...</span></span><br><span class="line">vgcreate vg9 /dev/sdb1 /dev/sdb2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除卷组</span></span><br><span class="line">vgremove vg9</span><br><span class="line"><span class="comment"># 移除卷组中的物理卷</span></span><br><span class="line">vgreduce vg9 /dev/sdb5</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看卷组vg9的基本信息</span></span><br><span class="line">vgdisplay -v vg9 </span><br><span class="line"><span class="comment"># 查看卷组vg9的使用情况</span></span><br><span class="line">vgdisplay -s</span><br></pre></td></tr></table></figure>

<p><code>PE</code>(物理块):它是卷组创建时要指定的基本逻辑单位，4M(默认),8M,12M…(4的整数倍即可)</p>
<h2 id="逻辑卷"><a href="#逻辑卷" class="headerlink" title="逻辑卷"></a>逻辑卷</h2><p>从<code>卷组</code>中划拨出<code>逻辑卷</code><br><code>逻辑卷</code>的大小也可以动态的调整<br>约束条件：以PE的<code>整数倍</code>进行增加或减小</p>
<p>小提示💡:逻辑卷所占用的PE，可以跨越不同的物理卷</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建逻辑卷</span></span><br><span class="line"><span class="comment"># 格式: lvcreate -n 逻辑卷名称 -L 逻辑卷大小(加不加单位都可以) 卷组名</span></span><br><span class="line">lvcreate -n lv0 -L 80 vg9  <span class="comment">#创建了一个逻辑卷名称叫lv0,大小80M，位于卷组vg9中</span></span><br><span class="line"><span class="comment"># 逻辑卷格式化</span></span><br><span class="line">mkfs.ext4 /dev/vg9/lv0 </span><br><span class="line"><span class="comment"># 删除逻辑卷</span></span><br><span class="line">lvremove /dev/vg9/lv0</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">lvdisplay</span><br></pre></td></tr></table></figure>

<h2 id="例题一"><a href="#例题一" class="headerlink" title="例题一"></a>例题一</h2><p>动态的调整卷组的大小<br>动态的调整逻辑卷的大小</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">创建三个物理分区，并将它们指定成三个大小都为100M的物理卷</span><br><span class="line">再建立一个卷组vg9,当中要包含两个物理卷</span><br><span class="line">在卷组vg9中创建两个逻辑卷lv0,lv1，大小分别是100M和40M,要求分别用xfs和ext4格式化，并自动挂载到目录/lvm0和/lvm1上</span><br><span class="line">要求动态增加lv0是20M，减小lv1的大小12M</span><br><span class="line">从卷组vg9中添加、删除物理卷进行测试</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一步:创建三个大小为100M的物理分区/dev/sdb5,/dev/sdb6./dev/sdb7,类型都改为 8e</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line">partprobe   <span class="comment">#刷新</span></span><br><span class="line">fdisk -l    <span class="comment">#查看</span></span><br><span class="line"></span><br><span class="line">****************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二步:将物理分区/dev/sdb5建立成物理卷/dev/sdb5</span></span><br><span class="line">pvcreate /dev/sdb5</span><br><span class="line">pvcreate /dev/sdb6</span><br><span class="line">pvcreate /dev/sdb7</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">pvdisplay</span><br><span class="line"></span><br><span class="line">****************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三步:把其中两个物理卷加入到新建的卷组vg9中</span></span><br><span class="line"><span class="comment"># 创建卷组vg9,包含物理卷/dev/sdb5和/dev/sdb6,默认PE大小4M</span></span><br><span class="line">vgcreate vg9 /dev/sdb5 /dev/sdb6</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">vgdisplay -v</span><br><span class="line"></span><br><span class="line">****************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第四步:创建逻辑卷</span></span><br><span class="line"><span class="comment"># 新建名为lv0,大小为100M的逻辑卷 </span></span><br><span class="line">lvcreate -n lv0 -L 100 vg9 </span><br><span class="line"><span class="comment"># 新建名为lv1,大小为40M的逻辑卷 </span></span><br><span class="line"><span class="comment"># -l : PE的个数,如果不做修改的话,PE默认大小为4M</span></span><br><span class="line"><span class="comment"># -L : 直接设置逻辑卷的大小</span></span><br><span class="line">lvcreate -n lv1 -l 10 vg9</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">lvdisplay</span><br><span class="line"></span><br><span class="line">****************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第五步:对逻辑卷进行格式化</span></span><br><span class="line">mkfs.xfs /dev/vg9/lv0</span><br><span class="line">mkfs. ext4 /dev/vg9/lv1</span><br><span class="line"><span class="comment"># 查看UUID</span></span><br><span class="line">blkid</span><br><span class="line"></span><br><span class="line">****************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第六步:创建目标目录/lvm0和/lvm1</span></span><br><span class="line">mkdir /lv0</span><br><span class="line">mkdir /lv1</span><br><span class="line"></span><br><span class="line">****************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第七步:挂载</span></span><br><span class="line"><span class="comment"># 方式一:手动挂载</span></span><br><span class="line">mount /dev/vg9/lv0 /lv0</span><br><span class="line"><span class="comment"># 方式二:开机自动挂载</span></span><br><span class="line"><span class="comment"># 不要用UUID挂载,有问题</span></span><br><span class="line">vim /etc/fstab  </span><br><span class="line">/dev/vg9/lv0            /lv0                   xfs    defaults        0 0</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">mount -a</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">df -Th</span><br><span class="line"></span><br><span class="line">****************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第八步:增加文件系统的大小</span></span><br><span class="line"><span class="comment"># 增加文件系统大小 不必卸载 文件目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 增加逻辑卷容量</span></span><br><span class="line">lvresize -L +20M /dev/vg9/lv0   <span class="comment">#增加逻辑卷lv0大小20M</span></span><br><span class="line"><span class="comment"># 注意：此时仅仅增加的是 逻辑卷lv0 的大小；</span></span><br><span class="line">lvdisplay</span><br><span class="line"><span class="comment"># 逻辑卷 lv0 对应的 文件系统的大小 并未增加</span></span><br><span class="line"><span class="comment"># 测试方法：mount 命令将其挂载到目标目录上，用df -Th看其对应的文件系统大小仍然为100M</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 正确解法:</span></span><br><span class="line"><span class="comment"># 增加文件系统大小,目录一定要处于挂载上的状态,不然无法更新</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 更新</span></span><br><span class="line">xfs_growfs /dev/vg9/lv0     <span class="comment">#更新逻辑卷lv0所对应的 xfs 文件系统的大小</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">resize2fs /dev/vg9/lv0      <span class="comment">#更新逻辑卷lv0所对应的 ext4, 3 文件系统的大小</span></span><br><span class="line"><span class="comment"># 再次用df -Th看文件系统大小也为120M了</span></span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第九步:减小文件系统的大小</span></span><br><span class="line"><span class="comment"># 1. 跟增加不同的是,ext4减小需要卸载目录,不先卸载文件目录的话会报错</span></span><br><span class="line">umount /lv1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 更新</span></span><br><span class="line">resize2fs /dev/vg9/lv1 28M  <span class="comment">#更新逻辑卷lv1所对应的ext2,3,4文件系统减小至28M</span></span><br><span class="line"><span class="comment"># 运行上边的命令会提示先运行 e2fsck -f /dev/vg9/lv1 ，要求先检查文件系统，运行该条命令就没有问题了。</span></span><br><span class="line"><span class="comment"># 3. 将逻辑卷lv1的大小减小至28M</span></span><br><span class="line">lvresize -L -12M /dev/vg9/lv1 </span><br><span class="line">mount -a</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">df -Th</span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第十步:向卷组vg9中添加新的物理卷</span></span><br><span class="line">vgextend vg9 /dev/sdb7</span><br><span class="line">vgdisplay -v</span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第十一步:从卷组vg9中删除物理卷</span></span><br><span class="line"><span class="comment">#释放与物理卷/dev/sdb5包含的PE</span></span><br><span class="line">pvmove /dev/sdb5  </span><br><span class="line"><span class="comment">#从卷组vg9中删除物理卷/dev/sdb5</span></span><br><span class="line">vgreduce vg9 /dev/sdb5  </span><br><span class="line"><span class="comment">#查看卷组vg9的基本信息</span></span><br><span class="line">vgdisplay -v vg9 </span><br><span class="line"><span class="comment"># 查看卷组vg9的使用情况</span></span><br><span class="line">vgdisplay -s </span><br><span class="line"><span class="comment"># 注意：逻辑卷/dev/vg9/lv0所占用的PE可以跨越不同的物理分区</span></span><br></pre></td></tr></table></figure>

<h2 id="例题二"><a href="#例题二" class="headerlink" title="例题二"></a>例题二</h2><p>创建逻辑卷database,属于卷组datastore<br>逻辑卷的大小为10个扩展物理单元(PE)<br>PE的大小为16M<br>使用xfs文件系统格式化该逻辑卷,并自动挂载到/mnt/database上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一步:创建三个物理分区，大小都为160M，类型为8e</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line">   8       24     171089 sdb8</span><br><span class="line">   8       25     171089 sdb9</span><br><span class="line">   8       26     171089 sdb10</span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二步:创建物理卷</span></span><br><span class="line">pvcreate /dev/sdb8</span><br><span class="line">pvcreate /dev/sdb9</span><br><span class="line">pvcreate /dev/sdb10</span><br><span class="line">pvdisplay</span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三步:创建卷组datastore,PE为16M,包含/dev/sdb8,/dev/sdb9</span></span><br><span class="line"><span class="comment"># -s : 设置PE的大小</span></span><br><span class="line">vgcreate -s 16M datastore /dev/sdb8 /dev/sdb9</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">vgdisplay -v datastore</span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第四步:创建逻辑卷database,大小为10个PE,即160M，并用xfs格式化。</span></span><br><span class="line">lvcreate -l 10 -n database datastore</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">lvdisplay</span><br><span class="line"><span class="comment"># 格式化为xfs格式</span></span><br><span class="line">mkfs.xfs /dev/datastore/database</span><br><span class="line"><span class="comment"># 查看UUID</span></span><br><span class="line">blkid</span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第五步:创建目标目录/mnt/database</span></span><br><span class="line">mkdir /mnt/database</span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第六步:修改自动挂载文件</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line">    /dev/datastore/database  /mnt/database          xfs    defaults        0 0</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">mount -a</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">df -Th</span><br><span class="line">    /dev/mapper/datastore-database xfs       154M  8.3M  146M    6% /mnt/database</span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第七步:调整逻辑卷database及其文件系统的大小为240M.</span></span><br><span class="line">lvresize -L +80M /dev/datastore/database    <span class="comment">#增加逻辑卷大小80M</span></span><br><span class="line">xfs_growfs /dev/datastore/database          <span class="comment">#更新逻辑卷所对应的xfs文件系统的大小。</span></span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">df -Th</span><br><span class="line">lvdisplay</span><br><span class="line"></span><br><span class="line">**************************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第八步:调整逻辑卷database及其文件系统大小为80M</span></span><br><span class="line">lvresize -L -160M /dev/datastore/database   <span class="comment">#将逻辑卷的大小减小160M</span></span><br><span class="line">xfs_growfs /dev/datastore/database          <span class="comment">#更新逻辑卷所对应的xfs文件系统的大小至80M。</span></span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">lvdisplay   <span class="comment">#逻辑卷的大小改变了</span></span><br><span class="line">df -Th      <span class="comment">#挂载目录大小没变</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发现挂载目录大小并没有改变</span></span><br><span class="line"><span class="comment"># 这是因为xfs格式只能增加,无法减小!!!!!!!!!!!!!</span></span><br><span class="line"><span class="comment"># 若是非要减小,只能重新格式化</span></span><br><span class="line"><span class="comment"># 这样做的话,文件里的东西就都被格式化了,不建议如此操作</span></span><br><span class="line"><span class="comment"># 如果真的想这么做,命令如下⬇️:</span></span><br><span class="line"></span><br><span class="line">lvresize -L -160M /dev/datastore/database   <span class="comment">#将逻辑卷的大小减小160M</span></span><br><span class="line">umount /dev/datastore/database              <span class="comment">#卸载目录</span></span><br><span class="line">mkfs.xfs -f /dev/datastore/database         <span class="comment">#强制格式化</span></span><br><span class="line">mount -a                                    <span class="comment">#重新挂载目录(之前已经配置过开机自启动)</span></span><br><span class="line">df -Th</span><br></pre></td></tr></table></figure>

<h1 id="网络环境配置"><a href="#网络环境配置" class="headerlink" title="网络环境配置"></a>网络环境配置</h1><h2 id="配置静态IP地址"><a href="#配置静态IP地址" class="headerlink" title="配置静态IP地址"></a>配置静态IP地址</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看IP</span></span><br><span class="line">ip a</span><br></pre></td></tr></table></figure>

<h3 id="配置防火墙"><a href="#配置防火墙" class="headerlink" title="配置防火墙"></a>配置防火墙</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看防火墙规则状态是否为关闭</span></span><br><span class="line">systemctl status firewalld </span><br><span class="line"></span><br><span class="line">systemctl start firewalld   <span class="comment">#开启iptables</span></span><br><span class="line">systemctl status firewalld  <span class="comment">#查看iptables的状态</span></span><br><span class="line">systemctl stop firewalld    <span class="comment">#关闭iptables</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看SElinux的状态是否为关闭状态 </span></span><br><span class="line">getenforce </span><br><span class="line"></span><br><span class="line">getenforce      <span class="comment">#查看SELinux的状态</span></span><br><span class="line">setenforce 0    <span class="comment">#关闭SElinux</span></span><br><span class="line">setenforce 1    <span class="comment">#打开SElinux</span></span><br><span class="line"></span><br><span class="line">将SElinux设置为关闭状态的永久生效方法</span><br><span class="line">vim /etc/sysconfig/selinux  <span class="comment">#将 enforcing 改为 disabled</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># This file controls the state of SELinux on the system.</span></span><br><span class="line">    <span class="comment"># SELINUX= can take one of these three values:</span></span><br><span class="line">    <span class="comment">#     enforcing - SELinux security policy is enforced.</span></span><br><span class="line">    <span class="comment">#     permissive - SELinux prints warnings instead of enforcing.</span></span><br><span class="line">    <span class="comment">#     disabled - No SELinux policy is loaded.</span></span><br><span class="line">    SELINUX=enforcing</span><br><span class="line">    <span class="comment"># SELINUXTYPE= can take one of three two values:</span></span><br><span class="line">    <span class="comment">#     targeted - Targeted processes are protected,</span></span><br><span class="line">    <span class="comment">#     minimum - Modification of targeted policy. Only selected processes are protected. </span></span><br><span class="line">    <span class="comment">#     mls - Multi Level Security protection.</span></span><br><span class="line">    SELINUXTYPE=targeted</span><br></pre></td></tr></table></figure>

<h3 id="删除旧的IP地址"><a href="#删除旧的IP地址" class="headerlink" title="删除旧的IP地址"></a>删除旧的IP地址</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr del 192.168.122.51/24 dev eth0</span><br></pre></td></tr></table></figure>

<h3 id="配置新的静态IP地址"><a href="#配置新的静态IP地址" class="headerlink" title="配置新的静态IP地址"></a>配置新的静态IP地址</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">   DEVICE=<span class="string">"eth0"</span></span><br><span class="line">   BOOTPROTO=<span class="string">"static"</span></span><br><span class="line">   ONBOOT=<span class="string">"yes"</span></span><br><span class="line">   TYPE=<span class="string">"Ethernet"</span></span><br><span class="line">   IPADDR=192.168.122.100   //IP地址</span><br><span class="line">   PREFIX=24                //子网掩码</span><br><span class="line">   GATEWAY=192.168.122.1    //网关</span><br><span class="line">   DNS1=202.207.48.3        //DNS服务器</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启网络服务</span></span><br><span class="line">systemctl restart network  </span><br><span class="line"></span><br><span class="line">ip a  <span class="comment">#IP地址已经被修改成了192.168.122.100</span></span><br></pre></td></tr></table></figure>

<h2 id="配置动态IP地址"><a href="#配置动态IP地址" class="headerlink" title="配置动态IP地址"></a>配置动态IP地址</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看防火墙规则状态是否为关闭</span></span><br><span class="line">systemctl status firewalld </span><br><span class="line"><span class="comment"># 查看SElinux的状态是否为关闭状态</span></span><br><span class="line">getenforce</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除旧的IP地址</span></span><br><span class="line">ip addr del 192.168.122.100/24 dev eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置新的动态IP地址</span></span><br><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"></span><br><span class="line">   DEVICE=<span class="string">"eth0"</span></span><br><span class="line">   BOOTPROTO=<span class="string">"dhcp"</span></span><br><span class="line">   ONBOOT=<span class="string">"yes"</span></span><br><span class="line">   TYPE=<span class="string">"Ethernet"</span></span><br><span class="line">   </span><br><span class="line"><span class="comment"># 重启网络服务</span></span><br><span class="line">systemctl restart network</span><br><span class="line">ip a  <span class="comment">#IP 地址已经被修改成了192.168.122.X</span></span><br></pre></td></tr></table></figure>

<h2 id="补充知识"><a href="#补充知识" class="headerlink" title="补充知识"></a>补充知识</h2><p>临时绑定多个IP地址当网卡eth0<br><code>ip addr add 192.168.122.X/24 dev eth0</code><br>ip a //可以查看到新绑定的IP地址</p>
<p><strong>注意：</strong>如果重启网络服务（systemctl restart network ），则使用 ip addr del 192.168.122.51/24 dev eth0或者ip addr add 192.168.122.X/24 dev eth0命令删除或添加的IP地址会失效。</p>
<h2 id="修改主机名"><a href="#修改主机名" class="headerlink" title="修改主机名"></a>修改主机名</h2><p>方法一：使用<code>hostnamectl set-hostname 51</code>命令，将主机名修改为<code>51</code><br><strong>注意：</strong>需要退出并重新登录后方可生效，主机名一旦修改，永久生效。</p>
<p>方法二：使用“vim /etc/hostname”命令，修改主机名配置文件，直接将文件中原来的主机名localhost.localdomain修改为新主机名<br>重新登录或者重启系统后，新主机名就会生效。</p>
<h1 id="压缩与解压缩"><a href="#压缩与解压缩" class="headerlink" title="压缩与解压缩"></a>压缩与解压缩</h1><h2 id="tar命令-归档-的使用"><a href="#tar命令-归档-的使用" class="headerlink" title="tar命令(归档)的使用"></a>tar命令(归档)的使用</h2><h3 id="创建tar包"><a href="#创建tar包" class="headerlink" title="创建tar包"></a>创建tar包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -c 创建归档包</span></span><br><span class="line"><span class="comment"># -v 显示详细的提示信息</span></span><br><span class="line"><span class="comment"># -f 指定文件名</span></span><br><span class="line">tar -cvf etc.tar /etc</span><br></pre></td></tr></table></figure>

<h3 id="创建压缩的tar包"><a href="#创建压缩的tar包" class="headerlink" title="创建压缩的tar包"></a>创建压缩的tar包</h3><p>两种压缩技术: <code>gzip</code> 和 <code>bzip</code></p>
<h4 id="gzip-gz"><a href="#gzip-gz" class="headerlink" title="gzip: ***.gz"></a>gzip: ***.gz</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在tar命令中添加一个参数 -z</span></span><br><span class="line">tar -zcvf bgl.tar.gz /etc   <span class="comment">#压缩目录</span></span><br><span class="line"><span class="comment"># 查看压缩包的大小</span></span><br><span class="line">du -sh etc.tar.gz</span><br><span class="line">tar -zcvf file.tar.gz 111.txt 222.txt    <span class="comment">#压缩文件</span></span><br></pre></td></tr></table></figure>

<h4 id="bzip2-bz2"><a href="#bzip2-bz2" class="headerlink" title="bzip2: ***.bz2"></a>bzip2: ***.bz2</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在tar命令中添加一个参数 -j</span></span><br><span class="line">tar -jcvf etc.tar.bz2 /etc  <span class="comment">#压缩目录</span></span><br><span class="line">tar -jcvf file.tar.bz2 111.txt 222.txt   <span class="comment">#压缩文件</span></span><br></pre></td></tr></table></figure>

<h2 id="查询tar包中包含的文件目录列表"><a href="#查询tar包中包含的文件目录列表" class="headerlink" title="查询tar包中包含的文件目录列表"></a>查询tar包中包含的文件目录列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -t 查看是否使用tar命令来归档的包</span></span><br><span class="line"><span class="comment"># -f 指定文件名</span></span><br><span class="line">tar -tf aaa.tar.gz</span><br><span class="line">tar -tf aaa.tar.bz2</span><br></pre></td></tr></table></figure>

<h2 id="释放tar包"><a href="#释放tar包" class="headerlink" title="释放tar包"></a>释放tar包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认释放在当前目录下</span></span><br><span class="line"><span class="comment"># 在tar命令中添加一个参数 -x</span></span><br><span class="line"><span class="comment"># 一般情况下使用: -xf 即可</span></span><br><span class="line">tar -xzvf etc.tar.gz</span><br><span class="line">tar -xjvf etc.tar.bz2</span><br></pre></td></tr></table></figure>

<h2 id="释放在指定目录下"><a href="#释放在指定目录下" class="headerlink" title="释放在指定目录下"></a>释放在指定目录下</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -C : 指定释放的目录</span></span><br><span class="line">mkdir /666</span><br><span class="line">tar -xjvf bgl.tar.bz2 -C /666</span><br></pre></td></tr></table></figure>

<h2 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h2><p>使用bzip2压缩,将/etc目录归档并压缩到/root/backup.tar.bz2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -jcvf /root/backup.tar.bz2 /etc</span><br></pre></td></tr></table></figure>

<h2 id="压缩知识扩展"><a href="#压缩知识扩展" class="headerlink" title="压缩知识扩展"></a>压缩知识扩展</h2><h3 id="gzip压缩的两种技术"><a href="#gzip压缩的两种技术" class="headerlink" title="gzip压缩的两种技术"></a>gzip压缩的两种技术</h3><h4 id="压缩技术一-gunzip-gzip"><a href="#压缩技术一-gunzip-gzip" class="headerlink" title="压缩技术一(gunzip,gzip)"></a>压缩技术一(gunzip,gzip)</h4><p><code>覆盖</code>源文件的压缩技术,但<code>无法压缩目录</code>       </p>
<p>参数:</p>
<ul>
<li>-d : 解压参数</li>
<li>-f : 强制覆盖以存在的同名压缩包</li>
<li>-v : 显示压缩过程</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">gzip -v &#123;1,2,3&#125;.txt   <span class="comment">#压缩效果是将源文件1.txt替换为1.txt.gz</span></span><br><span class="line"><span class="comment"># 注意：使用gzip命令压缩后,源文件就不存在了。</span></span><br><span class="line">gzip -fv &#123;1,2,3&#125;.txt  <span class="comment">#如果目标位置有同名的压缩文件（1.txt.gz）存在，则覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">gzip -d 111.txt.gz  <span class="comment">#解压的效果是将压缩文件111.txt.gz还原为111.txt。</span></span><br><span class="line">gunzip 111.txt.gz   <span class="comment">#gunzip命令与gzip -d的效果解压相同。</span></span><br></pre></td></tr></table></figure>

<h4 id="压缩技术二-tar-gz"><a href="#压缩技术二-tar-gz" class="headerlink" title="压缩技术二(tar.gz)"></a>压缩技术二(tar.gz)</h4><p>归档压缩技术，同前</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">tar zcvf filename.tar.gz -C /tmp/ </span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar zxvf filename.tar.gz </span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示列表</span></span><br><span class="line">tar tf filname.tar</span><br></pre></td></tr></table></figure>

<h3 id="bzip2压缩的两种技术"><a href="#bzip2压缩的两种技术" class="headerlink" title="bzip2压缩的两种技术"></a>bzip2压缩的两种技术</h3><h4 id="压缩技术一-bunzip2-bzip2"><a href="#压缩技术一-bunzip2-bzip2" class="headerlink" title="压缩技术一(bunzip2,bzip2)"></a>压缩技术一(bunzip2,bzip2)</h4><p><code>覆盖</code>源文件的压缩技术,但<code>无法压缩目录</code>     </p>
<p>参数:</p>
<ul>
<li>-d : 解压参数</li>
<li>-f : 强制覆盖以存在的同名压缩包</li>
<li>-v : 显示压缩过程</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">bzip2  &#123;1,2,3&#125;.txt  <span class="comment">#压缩效果是将源文件1.txt替换为1.txt.bz2</span></span><br><span class="line"><span class="comment"># 注意：使用bzip2命令压缩后，源文件就不存在了</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">bzip2 -d 1.txt.bz2  <span class="comment">#解压的效果是将压缩文件111.txt.bz2还原为111.txt</span></span><br><span class="line">bunzip2 1.txt.bz2 <span class="comment">#效果同上</span></span><br></pre></td></tr></table></figure>

<h4 id="压缩技术二-tar-bz2"><a href="#压缩技术二-tar-bz2" class="headerlink" title="压缩技术二(tar.bz2)"></a>压缩技术二(tar.bz2)</h4><p>归档压缩技术，同前</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">tar jcvf filename.tar.bz2 descfilename</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压 </span></span><br><span class="line">tar jxvf filename.tar.bz2 </span><br><span class="line">tar --bzip xvf filename.tar.bz2 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表</span></span><br><span class="line">tar tf filname.tar</span><br></pre></td></tr></table></figure>

<h3 id="zip压缩技术"><a href="#zip压缩技术" class="headerlink" title="zip压缩技术"></a>zip压缩技术</h3><p><code>不覆盖</code>源文件的压缩技术</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩</span></span><br><span class="line"><span class="comment"># 格式:zip filename.zip sourcefilename</span></span><br><span class="line">zip 111.txt.zip 111.txt  <span class="comment">#压缩效果是将源文件111.txt压缩为111.txt.zip</span></span><br><span class="line"><span class="comment"># 注意：使用该命令压缩后，源文件仍然存在</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩一个目录使用 -r 参数,-r 递归</span></span><br><span class="line">zip -r 222.zip 222   <span class="comment">#将目录222压缩为222.zip，压缩后源目录仍然存在</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line"><span class="comment"># 格式:unzip filename.zip      </span></span><br><span class="line">unzip 222.zip   <span class="comment">#解压效果是将222.zip解压为222目录</span></span><br><span class="line"><span class="comment">#注意：如果当前位置已经有222目录，则会提示是否覆盖</span></span><br></pre></td></tr></table></figure>

<h1 id="autofs自动挂载"><a href="#autofs自动挂载" class="headerlink" title="autofs自动挂载"></a>autofs自动挂载</h1><h2 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h2><p>autofs自动挂载器是一个监视目录的守护进程，并在目标子目录被引用时，自动执行预定义的NFS挂载。自动挂载器由autofs服务脚本管理，自动挂载器由auto.master一级配置文件进行配置，该文件引用了一个按惯例称作/etc/auto.misc或其他类似名称的二级配置文件。autofs与NFS两者之间配合用的还是比较多的</p>
<h2 id="使用目的"><a href="#使用目的" class="headerlink" title="使用目的"></a>使用目的</h2><p>autofs服务动态自动挂载各种文件系统。mount是用来挂载文件系统的，可以在启动的时候挂载也可以在启动后挂载。这就好像windows中的光驱自动打开功能，能够及时挂载动态加载的文件系统，免去了手动挂载的麻烦。在centos7.2系统下，对于本地固定设备，如硬盘可以使用mount挂载，而光盘，软盘，NFS，SMB等文件系统具有动态性，即需要的时候才有必要挂载，光驱和软盘一般知道什么时候需要挂载，但NFS，SMB共享等就不一定知道了，即一般不能及时知道NFS共享和SMB什么时候可以挂载，而autofs服务就提供这种功能，所以本章详细讲述了autofs自动挂载方式</p>
<h2 id="需要安装的软件"><a href="#需要安装的软件" class="headerlink" title="需要安装的软件"></a>需要安装的软件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">yum -y install autofs*</span><br><span class="line">yum -y install nfs*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">systemctl start rpcbind</span><br><span class="line">systemctl start nfs</span><br></pre></td></tr></table></figure>

<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>要求:将分区 <code>/dev/sdb1</code> 自动挂载到 <code>/misc/aaa</code> 目录下</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一步: 利用 fdisk 添加一块新磁盘</span></span><br><span class="line"><span class="comment"># 添加磁盘此处略过,不会的同学请去复习前面的内容,复习很重要哦</span></span><br><span class="line"><span class="comment"># 要求格式化为 ext4格式</span></span><br><span class="line">mkfs.ext4 /dev/sdb1</span><br><span class="line">blkid</span><br><span class="line">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br><span class="line"><span class="comment"># 第二步: 具体配置</span></span><br><span class="line"><span class="comment"># 打开一级文件</span></span><br><span class="line">vim /etc/auto.master    <span class="comment">#当访问/misc目录时,会自动查询二级文件/etc/auto.misc</span></span><br><span class="line"><span class="comment"># 打开二级文件</span></span><br><span class="line">vim /etc/auto.misc</span><br><span class="line">    <span class="comment">#填入以下内容</span></span><br><span class="line">    aaa  -fstype=ext4  :/dev/sdb2</span><br><span class="line"><span class="comment"># 保存退出</span></span><br><span class="line">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br><span class="line"><span class="comment"># 第三步: 重启服务</span></span><br><span class="line">systemctl restart autofs</span><br><span class="line">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br><span class="line"><span class="comment"># 第四步: 切换目录,触发文件挂载机制</span></span><br><span class="line"><span class="built_in">cd</span> /misc/aaa</span><br><span class="line"><span class="comment"># 查看是否挂载成功</span></span><br><span class="line">df -Th</span><br></pre></td></tr></table></figure>

<h1 id="NFS自动挂载"><a href="#NFS自动挂载" class="headerlink" title="NFS自动挂载"></a>NFS自动挂载</h1><h2 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h2><p>NFS（Network File System）即网络文件系统，是FreeBSD支持的文件系统中的一种，它允许网络中的计算机之间共享资源。在NFS的应用中，本地NFS的客户端应用可以透明地读写位于远端NFS服务器上的文件，就像访问本地文件一样</p>
<p>NFS最显而易见的优点：</p>
<ol>
<li><p>节省本地存储空间，将常用的数据存放在一台NFS服务器上且可以通过网络访问，那么本地终端将可以减少自身存储空间的使用。</p>
</li>
<li><p>用户不需要在网络中的每个机器上都建有Home目录，Home目录可以放在NFS服务器上且可以在网络上被访问使用。</p>
</li>
<li><p>一些存储设备如软驱、CDROM和Zip（一种高储存密度的磁盘驱动器与磁盘）等都可以在网络上被别的机器使用。这可以减少整个网络上可移动介质设备的数量</p>
</li>
</ol>
<h2 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h2><p>要求:将NFS<strong>服务器</strong>上发布的<code>共享目录/home/guests/guest2019</code>自动挂载到<strong>客户机</strong>的<code>/home/guests/guest2019</code>上</p>
<p>开两台虚拟机,一台作为<code>服务器</code>,另一台作为<code>客户机</code>来测试</p>
<h2 id="服务器端配置"><a href="#服务器端配置" class="headerlink" title="服务器端配置"></a>服务器端配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立共享目录</span></span><br><span class="line">mkdir -p /home/guests/guest2019</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改NFS主配置文件</span></span><br><span class="line">vim /etc/exports</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 填入以下内容</span></span><br><span class="line">    /home/guests/guest2019 10.211.55.0/24(rw,sync,no_root_squash)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 解析:</span></span><br><span class="line">    <span class="comment"># IP 字段表示允许IP地址范围在 10.211.55.0 网段的计算机访问共享目录 “/home/guests/guest2006”</span></span><br><span class="line">    <span class="comment"># “rw”表示有读写权限</span></span><br><span class="line">    <span class="comment"># “sync”表示数据同步写入内存和硬盘</span></span><br><span class="line">    <span class="comment"># “no_root_squash”表示NFS服务器共享目录用户的属性，如果用户是root，那么这个共享目录具有root的权限</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启服务</span></span><br><span class="line">systemctl restart nfs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置开机自启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> nfs-server.service</span><br></pre></td></tr></table></figure>

<h2 id="客户端测试"><a href="#客户端测试" class="headerlink" title="客户端测试"></a>客户端测试</h2><h3 id="方式一-手动挂载"><a href="#方式一-手动挂载" class="headerlink" title="方式一:手动挂载"></a>方式一:手动挂载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在客户机行新建一个挂载目录 /syz</span></span><br><span class="line">mkdir /syz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看NFS服务器发布的共享资源信息</span></span><br><span class="line"><span class="comment"># 注意: 需要关闭服务器端的防火墙,不然会出现查询错误</span></span><br><span class="line">showmount -e 10.211.55.5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 手动挂载</span></span><br><span class="line">mount 10.211.55.5:/home/guests/guest2019 /syz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看是否挂载成功</span></span><br><span class="line">df -Th</span><br></pre></td></tr></table></figure>

<h3 id="方式二-autofs自动挂载"><a href="#方式二-autofs自动挂载" class="headerlink" title="方式二:autofs自动挂载"></a>方式二:autofs自动挂载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 隐含原则：</span></span><br><span class="line"><span class="comment"># 若将NFS服务器上发布的共享目录自动挂载到客户端的n层目录上</span></span><br><span class="line"><span class="comment"># 则将前n-1层目录放置于一级文件中</span></span><br><span class="line"><span class="comment"># 最后一层目录放入二级文件中</span></span><br><span class="line"><span class="comment"># 并且除了最后一层目录，其他目录都需提前建立号好</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立需要的目录</span></span><br><span class="line">mkdir /home/guests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑一级文件</span></span><br><span class="line">vim /etc/auto.master</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 填入以下内容</span></span><br><span class="line">    <span class="comment"># auto.two_master 是我随便起的,自己编写一个记得住的名字即可</span></span><br><span class="line">    /home/guests /etc/auto.two_master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑二级文件</span></span><br><span class="line">vim /etc/auto.two_master</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 填入以下内容</span></span><br><span class="line">    guest2019 -fstype=nfs,rw 10.211.55.5:/home/guests/guest2019</span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载 /syz 目录</span></span><br><span class="line">umount /syz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看是否卸载成功</span></span><br><span class="line">df -Th</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启autofa服务</span></span><br><span class="line">systemctl restart autofs</span><br><span class="line">systemctl <span class="built_in">enable</span> autofs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换目录,触发autofa挂载机制</span></span><br><span class="line"><span class="comment"># 如果出现没有该目录,检查二级文件是否编写错误</span></span><br><span class="line"><span class="built_in">cd</span> /home/guests/guest2019</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看是否挂载成功</span></span><br><span class="line">df -Th</span><br></pre></td></tr></table></figure>


      
    </div>
    
    
    

    <div>
    
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script type="text/javascript" src="http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js"></script>
  <script src="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js"></script>
  <link rel="stylesheet" type="text/css" href="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css">

  <p><span>本文标题:</span>Linux笔记</p>
  <p><span>文章作者:</span>尚先森</p>
  <p><span>发布时间:</span>2019年09月29日 - 18:38:19</p>
  <p><span>最后更新:</span>2022年09月07日 - 15:29:11</p>
  <p><span>原始链接:</span><a href="/2019/09/29/Linux笔记/" title="Linux笔记">https://imauu.gitee.io/2019/09/29/Linux笔记/</a>
    <span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://imauu.gitee.io/2019/09/29/Linux笔记/" aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    clipboard.on('success', $(function(){
      $(".fa-clipboard").click(function(){
        swal({   
          title: "",   
          text: '复制成功',   
          html: false,
          timer: 500,   
          showConfirmButton: false
        });
      });
    }));  
</script>

    
    </div>

    
        
        <div>
            <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/syz.png" alt="尚先森 wechat" style="width: 200px; max-width: 100%;">
    <div>有任何问题可以扫描上方二维码私聊我哦😊</div>
</div>

        </div>
    
    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>您的支持是我创作的最大动力^_^</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/weixin.png" alt="尚先森 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/zhifubao.png" alt="尚先森 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Linux/" rel="tag"><img src="/images/tag.png"> Linux</a>
          
            <a href="/tags/笔记/" rel="tag"><img src="/images/tag.png"> 笔记</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/09/05/awk的使用方法/" rel="next" title="awk的使用方法">
                <i class="fa fa-chevron-left"></i> awk的使用方法
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/10/08/Linux笔记扩展/" rel="prev" title="Linux笔记扩展">
                Linux笔记扩展 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4nm4ry4apj205i05ia9y.jpg" alt="尚先森">
            
              <p class="site-author-name" itemprop="name">尚先森</p>
              <p class="site-description motion-element" itemprop="description">最后一刻，都不可以放弃希望！</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/shang-code" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:syz15822409222@126.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://a4.qpic.cn/psb?/V10taC184UP7Xd/DBrT8JfiC4.Cbt9gOoLq3EMz6VxjKNILvuMgpLI*L80!/c/dJ8AAAAAAAAA&ek=1&kp=1&pt=0&bo=rgGuAa4BrgERFyA!&tl=1&vuin=1093999475&tm=1566439200&sce=60-2-2&rf=0-0" target="_blank" title="微信">
                      
                        <i class="fa fa-fw fa-globe"></i>微信</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://a4.qpic.cn/psb?/V10taC184UP7Xd/ZzGxvjixd59IA0smjXXNRNqr.iYN*upaiO01bWSzGWE!/c/dJ8AAAAAAAAA&ek=1&kp=1&pt=0&bo=HALkAhwC5AIRFyA!&tl=1&vuin=1093999475&tm=1566439200&sce=60-2-2&rf=0-0" target="_blank" title="QQ">
                      
                        <i class="fa fa-fw fa-globe"></i>QQ</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.runoob.com/" title="菜鸟教程" target="_blank">菜鸟教程</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.imooc.com/" title="慕课网" target="_blank">慕课网</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux概述"><span class="nav-number">1.</span> <span class="nav-text">Linux概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#简介"><span class="nav-number">1.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提示符"><span class="nav-number">1.2.</span> <span class="nav-text">提示符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查询-帮助命令"><span class="nav-number">1.3.</span> <span class="nav-text">查询/帮助命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#查看系统内核版本"><span class="nav-number">1.3.1.</span> <span class="nav-text">查看系统内核版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ls命令-查看指定-当前路径中有哪些文件或目录"><span class="nav-number">1.3.2.</span> <span class="nav-text">ls命令:查看指定/当前路径中有哪些文件或目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ll-ls-l-每个字段的含义"><span class="nav-number">1.3.3.</span> <span class="nav-text">ll(ls -l):每个字段的含义</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新建文件-目录"><span class="nav-number">1.4.</span> <span class="nav-text">新建文件/目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#mkdir"><span class="nav-number">1.4.1.</span> <span class="nav-text">mkdir</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#touch"><span class="nav-number">1.4.2.</span> <span class="nav-text">touch</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除文件-目录"><span class="nav-number">1.5.</span> <span class="nav-text">删除文件/目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chmod-更改文件-目录权限"><span class="nav-number">1.6.</span> <span class="nav-text">chmod 更改文件/目录权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#方法一"><span class="nav-number">1.6.1.</span> <span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法二"><span class="nav-number">1.6.2.</span> <span class="nav-text">方法二</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四个帮助命令"><span class="nav-number">1.7.</span> <span class="nav-text">四个帮助命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#终端使用技巧"><span class="nav-number">1.8.</span> <span class="nav-text">终端使用技巧</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#了解路径"><span class="nav-number">1.9.</span> <span class="nav-text">了解路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux下的常见目录含义"><span class="nav-number">1.10.</span> <span class="nav-text">Linux下的常见目录含义</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件操作命令"><span class="nav-number">2.</span> <span class="nav-text">文件操作命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#vim编辑器的用法"><span class="nav-number">2.1.</span> <span class="nav-text">vim编辑器的用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户的家目录与虚拟控制台"><span class="nav-number">2.2.</span> <span class="nav-text">用户的家目录与虚拟控制台</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#用户的家目录问题"><span class="nav-number">2.2.1.</span> <span class="nav-text">用户的家目录问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#虚拟控制台的使用技巧"><span class="nav-number">2.2.2.</span> <span class="nav-text">虚拟控制台的使用技巧</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重定向技术"><span class="nav-number">2.3.</span> <span class="nav-text">重定向技术</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#查看文件内容的命令"><span class="nav-number">2.3.1.</span> <span class="nav-text">查看文件内容的命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输出重定向"><span class="nav-number">2.3.2.</span> <span class="nav-text">输出重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#追加重定向"><span class="nav-number">2.3.3.</span> <span class="nav-text">追加重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#错误重定向"><span class="nav-number">2.3.4.</span> <span class="nav-text">错误重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#全部重定向"><span class="nav-number">2.3.5.</span> <span class="nav-text">全部重定向</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find命令"><span class="nav-number">2.4.</span> <span class="nav-text">find命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mv移动命令的四种用法"><span class="nav-number">2.5.</span> <span class="nav-text">mv移动命令的四种用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cp复制命令的四种用法"><span class="nav-number">2.6.</span> <span class="nav-text">cp复制命令的四种用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#grep在文件内容中查找"><span class="nav-number">2.7.</span> <span class="nav-text">grep在文件内容中查找</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#用户与组管理"><span class="nav-number">3.</span> <span class="nav-text">用户与组管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#用户管理之useradd命令"><span class="nav-number">3.1.</span> <span class="nav-text">用户管理之useradd命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux系统底层的四个连锁反映"><span class="nav-number">3.2.</span> <span class="nav-text">Linux系统底层的四个连锁反映</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#etc-passwd-七个字段的含义"><span class="nav-number">3.2.1.</span> <span class="nav-text">/etc/passwd 七个字段的含义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#etc-group-四个字段的含义"><span class="nav-number">3.2.2.</span> <span class="nav-text">/etc/group 四个字段的含义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#etc-shadow-九个字段的含义"><span class="nav-number">3.2.3.</span> <span class="nav-text">/etc/shadow 九个字段的含义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户的邮箱"><span class="nav-number">3.2.4.</span> <span class="nav-text">用户的邮箱</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户模板目录"><span class="nav-number">3.2.5.</span> <span class="nav-text">用户模板目录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#相关测试"><span class="nav-number">3.3.</span> <span class="nav-text">相关测试:</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shell测试"><span class="nav-number">3.3.1.</span> <span class="nav-text">shell测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他参数测试"><span class="nav-number">3.3.2.</span> <span class="nav-text">其他参数测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户管理之userdel命令"><span class="nav-number">3.4.</span> <span class="nav-text">用户管理之userdel命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#不彻底的删除方法"><span class="nav-number">3.4.1.</span> <span class="nav-text">不彻底的删除方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#彻底的删除方法"><span class="nav-number">3.4.2.</span> <span class="nav-text">彻底的删除方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户管理之usermod命令"><span class="nav-number">3.5.</span> <span class="nav-text">用户管理之usermod命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组管理之groupadd命令"><span class="nav-number">3.6.</span> <span class="nav-text">组管理之groupadd命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组管理之groupdel命令"><span class="nav-number">3.7.</span> <span class="nav-text">组管理之groupdel命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gpasswd-usermod-组和用户的关系"><span class="nav-number">3.8.</span> <span class="nav-text">(gpasswd,usermod)组和用户的关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chown命令的使用方法"><span class="nav-number">3.9.</span> <span class="nav-text">chown命令的使用方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#runlevel运行级别"><span class="nav-number">4.</span> <span class="nav-text">runlevel运行级别</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7种运行级别的含义"><span class="nav-number">4.1.</span> <span class="nav-text">7种运行级别的含义:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看和改变运行级别的方法"><span class="nav-number">4.2.</span> <span class="nav-text">查看和改变运行级别的方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#破解超级用户root的密码"><span class="nav-number">5.</span> <span class="nav-text">破解超级用户root的密码</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#高级权限"><span class="nav-number">6.</span> <span class="nav-text">高级权限</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#UMASK反掩码"><span class="nav-number">6.1.</span> <span class="nav-text">UMASK反掩码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#如何查看反掩码"><span class="nav-number">6.1.1.</span> <span class="nav-text">如何查看反掩码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UMASK反掩码的作用"><span class="nav-number">6.1.2.</span> <span class="nav-text">UMASK反掩码的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何修改UMASK反掩码"><span class="nav-number">6.1.3.</span> <span class="nav-text">如何修改UMASK反掩码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SUID权限弥补"><span class="nav-number">6.2.</span> <span class="nav-text">SUID权限弥补</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#usr-bin-passwd"><span class="nav-number">6.2.1.</span> <span class="nav-text">/usr/bin/passwd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试SUID"><span class="nav-number">6.2.2.</span> <span class="nav-text">测试SUID</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#s与S的区别"><span class="nav-number">6.2.3.</span> <span class="nav-text">s与S的区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SGID权限弥补"><span class="nav-number">6.3.</span> <span class="nav-text">SGID权限弥补</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#STICK粘滞位"><span class="nav-number">6.4.</span> <span class="nav-text">STICK粘滞位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ACL访问控制列表"><span class="nav-number">6.5.</span> <span class="nav-text">ACL访问控制列表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#设置文件的ACL信息"><span class="nav-number">6.5.1.</span> <span class="nav-text">设置文件的ACL信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置目录的ACL信息"><span class="nav-number">6.5.2.</span> <span class="nav-text">设置目录的ACL信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除ACL信息"><span class="nav-number">6.5.3.</span> <span class="nav-text">删除ACL信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#chmod知识补充"><span class="nav-number">6.5.4.</span> <span class="nav-text">chmod知识补充</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RPM软件包及YUM软件仓库的使用"><span class="nav-number">7.</span> <span class="nav-text">RPM软件包及YUM软件仓库的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RPM软件包的使用技巧"><span class="nav-number">7.1.</span> <span class="nav-text">RPM软件包的使用技巧</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#镜像文件的回环挂载"><span class="nav-number">7.2.</span> <span class="nav-text">镜像文件的回环挂载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#含义"><span class="nav-number">7.2.1.</span> <span class="nav-text">含义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#回环挂载的用法"><span class="nav-number">7.2.2.</span> <span class="nav-text">回环挂载的用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#卸载目录的方法"><span class="nav-number">7.2.3.</span> <span class="nav-text">卸载目录的方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#YUM软件仓库的配置及使用"><span class="nav-number">7.3.</span> <span class="nav-text">YUM软件仓库的配置及使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改YUM软件仓库的配置文件"><span class="nav-number">7.3.1.</span> <span class="nav-text">修改YUM软件仓库的配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#YUM常见命令使用技巧"><span class="nav-number">7.3.2.</span> <span class="nav-text">YUM常见命令使用技巧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通过指定的FTP服务器设置YUM软件仓库源"><span class="nav-number">7.3.3.</span> <span class="nav-text">通过指定的FTP服务器设置YUM软件仓库源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通过真实的CentOS7服务器作为YUM软件仓库源"><span class="nav-number">7.3.4.</span> <span class="nav-text">通过真实的CentOS7服务器作为YUM软件仓库源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#YUM软件仓库源常见错误的解决方法（yum-PID）"><span class="nav-number">7.3.5.</span> <span class="nav-text">YUM软件仓库源常见错误的解决方法（yum.PID）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Crontab定时任务"><span class="nav-number">8.</span> <span class="nav-text">Crontab定时任务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#用户定时任务的使用技巧"><span class="nav-number">8.1.</span> <span class="nav-text">用户定时任务的使用技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#用户定时任务的格式"><span class="nav-number">8.1.1.</span> <span class="nav-text">用户定时任务的格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置用户定时任务的步骤："><span class="nav-number">8.1.2.</span> <span class="nav-text">设置用户定时任务的步骤：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例"><span class="nav-number">8.1.3.</span> <span class="nav-text">实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#管理员对用户定时任务的管理方法"><span class="nav-number">8.1.4.</span> <span class="nav-text">管理员对用户定时任务的管理方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户定时任务的高级管理技巧"><span class="nav-number">8.1.5.</span> <span class="nav-text">用户定时任务的高级管理技巧</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#系统定时任务的使用技巧"><span class="nav-number">8.2.</span> <span class="nav-text">系统定时任务的使用技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#系统定时任务的工作目录"><span class="nav-number">8.2.1.</span> <span class="nav-text">系统定时任务的工作目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#anacron系统"><span class="nav-number">8.2.2.</span> <span class="nav-text">anacron系统</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#FS-Management-文件系统管理"><span class="nav-number">9.</span> <span class="nav-text">FS Management(文件系统管理)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux下的磁盘分区及其表示方法"><span class="nav-number">9.1.</span> <span class="nav-text">Linux下的磁盘分区及其表示方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#磁盘的表示方法"><span class="nav-number">9.1.1.</span> <span class="nav-text">磁盘的表示方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分区的表示方法"><span class="nav-number">9.1.2.</span> <span class="nav-text">分区的表示方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主分区-扩展分区和逻辑分区"><span class="nav-number">9.1.3.</span> <span class="nav-text">主分区,扩展分区和逻辑分区</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为虚拟机添加一块磁盘"><span class="nav-number">9.2.</span> <span class="nav-text">为虚拟机添加一块磁盘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fdisk命令的使用技巧"><span class="nav-number">9.3.</span> <span class="nav-text">fdisk命令的使用技巧</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#更新磁盘分区表的方法"><span class="nav-number">9.4.</span> <span class="nav-text">更新磁盘分区表的方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#格式化磁盘分区的方法"><span class="nav-number">9.5.</span> <span class="nav-text">格式化磁盘分区的方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用分区存放数据"><span class="nav-number">9.6.</span> <span class="nav-text">使用分区存放数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#方法一-手动挂载"><span class="nav-number">9.6.1.</span> <span class="nav-text">方法一:手动挂载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法二-自动挂载"><span class="nav-number">9.6.2.</span> <span class="nav-text">方法二:自动挂载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法三-UUID挂载"><span class="nav-number">9.6.3.</span> <span class="nav-text">方法三:UUID挂载</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#swap交换分区的管理"><span class="nav-number">10.</span> <span class="nav-text">swap交换分区的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#物理分区实现swap分区大小的变化"><span class="nav-number">10.1.</span> <span class="nav-text">物理分区实现swap分区大小的变化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#计算swap的差值"><span class="nav-number">10.2.</span> <span class="nav-text">计算swap的差值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建一个大小为502852大小的物理分区并将该分区类型修改为swap"><span class="nav-number">10.3.</span> <span class="nav-text">创建一个大小为502852大小的物理分区并将该分区类型修改为swap</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#LVM逻辑卷管理"><span class="nav-number">11.</span> <span class="nav-text">LVM逻辑卷管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#物理分区和物理卷"><span class="nav-number">11.1.</span> <span class="nav-text">物理分区和物理卷</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#卷组"><span class="nav-number">11.2.</span> <span class="nav-text">卷组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#逻辑卷"><span class="nav-number">11.3.</span> <span class="nav-text">逻辑卷</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#例题一"><span class="nav-number">11.4.</span> <span class="nav-text">例题一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#例题二"><span class="nav-number">11.5.</span> <span class="nav-text">例题二</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#网络环境配置"><span class="nav-number">12.</span> <span class="nav-text">网络环境配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#配置静态IP地址"><span class="nav-number">12.1.</span> <span class="nav-text">配置静态IP地址</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#配置防火墙"><span class="nav-number">12.1.1.</span> <span class="nav-text">配置防火墙</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除旧的IP地址"><span class="nav-number">12.1.2.</span> <span class="nav-text">删除旧的IP地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置新的静态IP地址"><span class="nav-number">12.1.3.</span> <span class="nav-text">配置新的静态IP地址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置动态IP地址"><span class="nav-number">12.2.</span> <span class="nav-text">配置动态IP地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#补充知识"><span class="nav-number">12.3.</span> <span class="nav-text">补充知识</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改主机名"><span class="nav-number">12.4.</span> <span class="nav-text">修改主机名</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#压缩与解压缩"><span class="nav-number">13.</span> <span class="nav-text">压缩与解压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#tar命令-归档-的使用"><span class="nav-number">13.1.</span> <span class="nav-text">tar命令(归档)的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建tar包"><span class="nav-number">13.1.1.</span> <span class="nav-text">创建tar包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建压缩的tar包"><span class="nav-number">13.1.2.</span> <span class="nav-text">创建压缩的tar包</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#gzip-gz"><span class="nav-number">13.1.2.1.</span> <span class="nav-text">gzip: ***.gz</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bzip2-bz2"><span class="nav-number">13.1.2.2.</span> <span class="nav-text">bzip2: ***.bz2</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查询tar包中包含的文件目录列表"><span class="nav-number">13.2.</span> <span class="nav-text">查询tar包中包含的文件目录列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#释放tar包"><span class="nav-number">13.3.</span> <span class="nav-text">释放tar包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#释放在指定目录下"><span class="nav-number">13.4.</span> <span class="nav-text">释放在指定目录下</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题"><span class="nav-number">13.5.</span> <span class="nav-text">习题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#压缩知识扩展"><span class="nav-number">13.6.</span> <span class="nav-text">压缩知识扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#gzip压缩的两种技术"><span class="nav-number">13.6.1.</span> <span class="nav-text">gzip压缩的两种技术</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#压缩技术一-gunzip-gzip"><span class="nav-number">13.6.1.1.</span> <span class="nav-text">压缩技术一(gunzip,gzip)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#压缩技术二-tar-gz"><span class="nav-number">13.6.1.2.</span> <span class="nav-text">压缩技术二(tar.gz)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bzip2压缩的两种技术"><span class="nav-number">13.6.2.</span> <span class="nav-text">bzip2压缩的两种技术</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#压缩技术一-bunzip2-bzip2"><span class="nav-number">13.6.2.1.</span> <span class="nav-text">压缩技术一(bunzip2,bzip2)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#压缩技术二-tar-bz2"><span class="nav-number">13.6.2.2.</span> <span class="nav-text">压缩技术二(tar.bz2)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zip压缩技术"><span class="nav-number">13.6.3.</span> <span class="nav-text">zip压缩技术</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#autofs自动挂载"><span class="nav-number">14.</span> <span class="nav-text">autofs自动挂载</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#简介-1"><span class="nav-number">14.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用目的"><span class="nav-number">14.2.</span> <span class="nav-text">使用目的</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#需要安装的软件"><span class="nav-number">14.3.</span> <span class="nav-text">需要安装的软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试"><span class="nav-number">14.4.</span> <span class="nav-text">测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置"><span class="nav-number">14.5.</span> <span class="nav-text">配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NFS自动挂载"><span class="nav-number">15.</span> <span class="nav-text">NFS自动挂载</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#简介-2"><span class="nav-number">15.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试-1"><span class="nav-number">15.2.</span> <span class="nav-text">测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务器端配置"><span class="nav-number">15.3.</span> <span class="nav-text">服务器端配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#客户端测试"><span class="nav-number">15.4.</span> <span class="nav-text">客户端测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#方式一-手动挂载"><span class="nav-number">15.4.1.</span> <span class="nav-text">方式一:手动挂载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方式二-autofs自动挂载"><span class="nav-number">15.4.2.</span> <span class="nav-text">方式二:autofs自动挂载</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <img src="http://www.icosky.com/icon/48/Cartoon/Bleach%20Chibi%20Icons%20for%20mac/Bleach%20Chibi%20Nr%20%206%20Rukia%20by%20rukichen.png">
  </span>
  <span class="author" itemprop="copyrightHolder">尚先森</span>

  
</div>

<!-- 
  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>
 -->



        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'hU7o1mDSLSyDeK4wE4hDgcIG-gzGzoHsz',
        appKey: 'SezjNE3ljsOzb5og8uQs51FR',
        placeholder: '回复时请填写个人邮箱和昵称，网址选填。',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  


  

  

  
  
<!-- 自定义的js文件 -->
<script type="text/javascript" src="/js/src/custom.js"></script>


<!-- 页面点击小红心，在末尾添加，避免找不到 -->
<script type="text/javascript" src="/js/src/love.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/assets/kesyoban.model.json"},"display":{"superSample":2,"width":150,"height":200,"position":"left","hOffset":10,"vOffset":25},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>